openapi: 3.0.3
info:
  title: Green Feast - Swagger API Document
  description: |-
    The API documentation is a technical content, it contains all the information required to work with the API, with detailed information about resources, methods, requests and responses, testimonial information, … supported by instructions and examples.

      API documentation is typically created and maintained using conventional text editors. API description formats like the OpenAPI/Swagger Specification automate document processing, making it easier for teams to create and maintain them.

    _OpenAPI Specification is an API description format for REST APIs. An OpenAPI file allows you to describe the entire API including:_
      - Enables endpoints (/users) and how each endpoint operates (GET, POST, PUT, DELETE).
      - Input & output parameters of each API.
      - Authentication method.
      - Contact information, certificates (HTTP/HTTPS), terms of use and more.
      - API specifications can be written in YAML or JSON. This format is easy to read and understand for both users and computer languages.
    
    **To view this api document as an interface, you can download the `OpenAPI (Swagger) Editor` extension in VSCode, then open this api document file and click the `OpenAPI` button in the upper right corner (or use the `Shift + Alt + P` hotkey). Another way is copy, paste content from this file to sites [Swagger Editor](https://editor.swagger.io/)**
    
    Some reference links:
    - [Introducing swagger](https://topdev.vn/blog/gioi-thieu-swagger-cong-cu-document-cho-restfull-apis/)
    - [Swagger for Express.js REST API](https://www.youtube.com/watch?v=vhFK6hXV-Qo)
  termsOfService: http://swagger.io/terms/
  contact:
    email: luuduchai.nt@gmail.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0
externalDocs:
  description: Find more about Swagger
  url: http://swagger.io
servers:
  - url: http://localhost:3000/api
    description: Development mode (API Gateway)
  - url: https://greenfeast.space/api
    description: Production mode  
tags:
  - name: auth 
    description: Xử lý các vấn đề liên quan đến tài khoản user (tại API Gateway)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
  
  - name: area 
    description: Quản lý khu vực (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
  
  - name: table 
    description: Quản lý bàn (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
  
  - name: printer 
    description: Quản lý máy in (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
      
  - name: category 
    description: Quản lý danh mục món ăn (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
      
  - name: menu 
    description: Quản lý thực đơn (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api
      
  - name: promotion 
    description: Quản lý khuyến mãi (Management service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api    
      
  - name: order 
    description: Đặt món (Order service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api    
      
  - name: payment 
    description: Thanh toán (Payment service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api    
      
  - name: notification
    description: Thông báo (Notification service)
    externalDocs:
      description: More details
      url: https://greenfeast.space/api 
  - name: email
    description: Gửi mail (Notification service)
  - name: statistics
    description: Thống kê (Statistics service)
paths:
  /auth/signin:
    post:
      tags:
        - auth
      summary: Đăng nhập tài khoản (khách hàng)
      description: "Đăng nhập tài khoản với username (phone number) & password, sau đó trả về access token & refresh token. Lưu ý: access token sẽ tự động lưu vào cookie của trình duyệt dưới dạng mã hóa (signed key) và chỉ server mới được truy cập (lúc gửi thao tác lên server, server tự lấy access token trong cookie ra để kiểm tra trạng thái đăng nhập), vì thế không cần thao tác gì với access token mà chỉ cần xử lý refresh token. Access token chỉ tồn tại trong 10 tiếng, sau 10 tiếng thì gửi refresh token lên để lấy lại access token mới (tự tìm hiểu thêm về cơ chế jwt), phía dưới có api lấy lại access token từ refresh token. Refresh token chỉ tồn tại trong 1 tháng, sau 1 tháng thì người dùng đăng nhập lại để lấy lại 1 cặp access & refresh token mới."
      requestBody: 
        description: Truyền username (phone number) và password
        content: 
          application/json:
            schema:
              type: object
              properties: 
                username:
                  type: string
                  example: "0123456789"
                password:
                  type: string
                  example: luuduchai
        required: true
      responses:
        '200':
          description: Đăng nhập thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đăng nhập thành công
                    data: 
                      type: object
                      properties: 
                        access_token: 
                          type: string
                          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjA5MzIxMzIxMzIxMiIsImlhdCI6MTcxNjg4Mjk0MSwiZXhwIjoxNzE2OTE4OTQxfQ.ak2qYAs5dW928P-mezAp_WNc9fF5y1m95b6CJib4Htk
                        refresh_token: 
                          type: string
                          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjA5MzIxMzIxMzIxMiIsImlhdCI6MTcxNjg4Mjk0MSwiZXhwIjoxNzE5NDc0OTQxfQ.EkE6DCqusgP-8Ko7NIUVTlBpJWv2w6QEZTbD2UzhwHk
                        full_name: 
                          type: string
                          example: Lưu Đức Hải
                        data: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 093213213212
                            full_name: 
                              type: string
                              example: Lưu Đức Hải
                            gender: 
                              type: string
                              example: không
                            phone_number: 
                              type: string
                              example: 
                            address: 
                              type: string
                              example: 
                            role: 
                              type: string
                              example: customer
                            customer: 
                              type: object
                              properties: 
                                order_id_history: 
                                  type: array
                                  items: 
                                    type: string
                                    example: []

               
            
        '400':
          description: "Lỗi. Khi lỗi có thể trả về các status khác nhau, không nhất thiết là 400. Có thể check status code khác 200 tức là đã xảy ra lỗi. Hoặc check status bên dưới là error tức là có lỗi. Lưu ý: chỉ trong trường hợp xử lý thành công mới trả về tham số data (1 số trường hợp thành công thì không, ví dụ như update cái gì đó thì chỉ cần trả về message là update thành công là được), còn trong các trường hợp lỗi chỉ trả về status và message"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Số điện thoại hoặc mật khẩu không đúng

  /auth/signup: 
    post:
      tags:
        - auth
      summary: Đăng ký tài khoản (khách hàng)
      description: Đăng ký tài khoản với username (phone number) & password, full_name (bắt buộc)
      requestBody: 
        description: Truyền username và password, full_name 
        content: 
          application/json:
            schema:
              type: object
              properties: 
                username:
                  type: string
                  example: "0123456789"
                password:
                  type: string
                  example: luuduchai
                full_name:
                  type: string
                  example: Lưu Đức Hải
        required: true
      responses:
        '200':
          description: Đăng ký tài khoản thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: "Tài khoản 093213213212 được tạo thành công"
            
        '400':
          description: "Cách xử lý lỗi giống api phía trên. Lưu ý: phía backend xử lý, kiểm tra nhiều trường hợp lỗi chứ không phải 1 trường hợp nên front end chỉ cần trả về message trong response cho người dùng là được"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: "Số điện thoại đã tồn tại"
                    
  /auth/refresh-token:
    post:
      tags:
        - auth
      summary: Lấy lại access token từ fresh token (cả khách hàng và nhân viên)
      description: Xem chi tiết tại api sign in đầu tiên
      requestBody: 
        description: Truyền refresh_token, phía server sẽ lấy được thông tin của user từ refresh token đó và trả về access token mới (không cần đăng nhập hay xác thực gì hết, chỉ cần gửi refresh token là đủ)
        content: 
          application/json:
            schema:
              type: object
              properties: 
                refresh_token:
                  type: string
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjA5MzIxMzIxMzIxMiIsImlhdCI6MTcwODY2NzYxNiwiZXhwIjoxNzExMjU5NjE2fQ.pCKCUFIAf-v7fwbu4VQbSt6bqQXVVvjT19wWi2Snwlg
        required: true
      responses:
        '200':
          description: Lấy thành công access token mới
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Lấy access token thành công
                  data: 
                    type: object
                    properties:
                      access_token: 
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjA5MzIxMzIxMzIxMiIsImlhdCI6MTcwODY2NzYyNSwiZXhwIjoxNzA4NzAzNjI1fQ.3T73fV1McBPGFpfHZwXnyWBKbAzH9ZIHBgyC1VNplQY
        '400':
          description: Lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Refresh token không hợp lệ hoặc đã hết hạn
                    
  /auth/google:
    get:
      tags:
        - auth
      summary: Đăng nhập với google (khách hàng)
      description: "Đăng nhập với google, chỉ cần gắn đường link này cho nút đăng nhập với google là được. Còn lại thì server sẽ tự động xử lý. Không cần truyền param hay body gì hết. Chức năng này sẽ xác thực google và chuyển hướng về trang /, đồng thời đã áp dụng JWT, server sẽ tự động lưu access_token vào trình duyệt người dùng (không dùng refresh token cho loại đăng nhập này). Lưu ý: project GreenFeast đăng ký trên Google cloud hiện đã xuất bản và xác thực nên tài khoản google nào cũng có thể đăng nhập. Ngoài ra, để thuận tiện cho việc hiển thị tên người dùng lên giao diện, cookie sẽ lưu thêm 1 tham số nữa là full_name tương ứng tên người dùng. full_name này lưu ở chế độ client có thể truy cập cũng như không mã hóa nên front end có thể dễ dàng lấy ra giá trị để hiển thị" 
      responses:
        '200':
          description: Đăng nhập thành công, tự động chuyển hướng về trang / (hiện đang để tạm, tùy vào nghiệp vụ mà sau này sửa lại url chuyển hướng cho đúng)
          
        '400':
          description: Nếu lỗi thì tự động chuyển hướng lại trang đăng nhập

  /auth/logout:
    get:
      tags:
        - auth
      summary: Đăng xuất tài khoản (cả 2 role)
      description: "Đơn giản là xóa cookie access token trên client. Front end kiểm tra xem refresh token lưu ở đâu thì tự xóa luôn. Lưu ý: chức năng này chỉ đơn giản là xóa access token và refresh token trên cookie chứ không làm 2 token này hết hạn. Có thể thêm tokens vào black list nhưng mất thời gian và đặc biệt là JWT không hỗ trợ nên chỉ cần xóa token trong cookie là được" 
      responses:
        '302':
          description: Nếu log out thành công thì server tự động chuyển hướng về trang / với status code 302 (redirect)
          
        '400':
          description: Nếu có lỗi thì như cũ
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó
  
  /user/update:
    patch:
      tags:
        - auth 
      summary: Cập nhật thông tin tài khoản (khách hàng)
      description: Cập nhật các thông tin gồm full_name, birthday, gender, phone_number, address, email
      requestBody: 
        description: "Truyền các thông tin phía trên, tất cả đều là tùy chọn, muốn update cái gì thì gửi cái đó. Không cần gửi tham số username hay gì hết, vì server tự động lấy trong cookie ra access token để xác định ai đang đăng nhập. Lưu ý: các tham số trong body đều được check qua validator, nên cần gửi đúng định dạng phía dưới. Mỗi tham số đều có description nên cần chú ý"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                full_name:
                  description: Có ít nhất 3 kí tự
                  type: string
                  example: Hải
                birthday:
                  type: string
                  example: 2002-08-15
                  description: Định dạng là yyyy/mm/dd
                gender:   
                  type: string
                  example: nam
                  description: Chỉ có nam, nữ, khác (viết thường hết)
                phone_number:
                  type: string
                  example: "0123213123"
                  description: Đúng định dạng số điện thoại
                address: 
                  type: string
                  example: "Quận 7"
                  description: Địa chỉ do người dùng tự nhập, không yêu cầu valid
                email: 
                  type: string
                  example: "customer@gmail.com"
                  description: Đúng định dạng địa chỉ email
        required: true
      responses:
        '200':
          description: Lấy thành công access token mới
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Cập nhật thông tin tài khoản thành công
                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Tên người dùng quá ngắn 
                    
  /admin/auth/signin:
    post:
      tags:
        - auth 
      summary: Đăng nhập tài khoản phía nhà hàng (nhân viên, ...)
      description: Tương tự như chức năng sign in bên khách hàng, chỉ cần username và password, trả về access token và refresh token
      requestBody: 
        description: "username & password"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                username:
                  type: string
                  example: "031238123"
                password:
                  type: string
                  example: "3123213123"
        required: true
      responses:
        '200':
          description: Đăng nhập thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đăng nhập thành công
                    data: 
                      type: object
                      properties: 
                        access_token: 
                          type: string
                          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjY1ZWIxMjdhZWU5MmIzYzA2YTNlYjI4YSIsImlhdCI6MTcwOTkyMjU2MiwiZXhwIjoxNzA5OTU4NTYyfQ.qleaZTrN97-880ZfxzFwMXEzmm5Py2J0eA5iXwEC3ds
                        refresh_token: 
                          type: string
                          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IjY1ZWIxMjdhZWU5MmIzYzA2YTNlYjI4YSIsImlhdCI6MTcwOTkyMjU2MiwiZXhwIjoxNzEyNTE0NTYyfQ.ZS8wOBZrKU7pDApmM9dQhPBFxnFZ9jpa5fz4M8Y__pI
                        full_name: 
                          type: string
                          example: Đức Hải
                        data: 
                          type: object
                          properties: 
                            customer: 
                              type: object
                              properties: 
                                order_list: 
                                  type: array
                                  items: 
                                    type: string
                                  example: []
                            _id: 
                              type: string
                              example: 65eb127aee92b3c06a3eb28a
                            full_name: 
                              type: string
                              example: Đức Hải
                            gender: 
                              type: string
                              example: không
                            phone_number: 
                              type: string
                              example: 
                            address: 
                              type: string
                              example: 
                            role: 
                              type: string
                              example: admin
                            user_type: 
                              type: number
                              example: 1
                            createdAt: 
                              type: string
                              format: date-time
                              example: 2024-03-08T13:28:26.273Z
                            updatedAt: 
                              type: string
                              format: date-time
                              example: 2024-03-08T13:28:26.273Z
                            __v: 
                              type: number
                              example: 0

                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Số điện thoại hoặc mật khẩu không đúng                
  /admin/user/update:
    patch:
      tags:
        - auth 
      summary: Cập nhật thông tin tài khoản (nhân viên)
      description: Giống y chang cập nhật thông tin tài khoản khách hàng
      requestBody: 
        description: "Tất cả đều là tùy chọn, muốn update cái gì thì gửi cái đó. Không cần gửi tham số username hay gì hết, vì server tự động lấy trong cookie ra access token để xác định ai đang đăng nhập. Lưu ý: các tham số trong body đều được check qua validator, nên cần gửi đúng định dạng phía dưới. Mỗi tham số đều có description nên cần chú ý"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                full_name:
                  description: Có ít nhất 3 kí tự
                  type: string
                  example: Hải
                birthday:
                  type: string
                  example: 2002-08-15
                  description: Định dạng là yyyy/mm/dd
                gender:   
                  type: string
                  example: nam
                  description: Chỉ có nam, nữ, khác (viết thường hết)
                phone_number:
                  type: string
                  example: "0123213123"
                  description: Đúng định dạng số điện thoại
                address: 
                  type: string
                  example: "Quận 7"
                  description: Địa chỉ do người dùng tự nhập, không yêu cầu valid
                email: 
                  type: string
                  example: "customer@gmail.com"
                  description: Đúng định dạng địa chỉ email
        required: true
      responses:
        '200':
          description: Lấy thành công access token mới
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Cập nhật thông tin tài khoản thành công
                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Tên người dùng quá ngắn 
                    
  /admin/create-employee:
    post:
      tags:
        - auth 
      summary: Tạo tài khoản nhân viên (quản lý nhà hàng)
      description: "Quản lý nhà hàng tạo tài khoản nhân viên gồm username (số điện thoại), password, fullname và các quyền tương ứng với tài khoản đó. Ngoài ra có 1 số tham số optional là position (vị trí làm việc, như nhân viên phục vụ, thu ngân, ...) và experience (kinh nghiệm làm việc). Để sử dụng chức năng này cần đăng nhập với tài khoản có quyền hạn được phân bổ từ trước, nếu không có quyền hạn mà vào sẽ quăng ra lỗi. Có trường hợp đặc biệt khi thêm role được trình bày bên dưới"
      requestBody: 
        description: "position và experience là tùy chọn, có thể có hoặc không. Đối với role, có 3 tùy chọn là cashier, waitstaff và other. Đối với cashier và waitstaff thì không cần đến tham số grants, chỉ cần truyền thẳng chuỗi cashier và waitstaff vào role. Nhưng đối với other, lúc này quản lý muốn cấp 1 số quyền đặc biệt, cần có tham số là grants gồm mảng các danh sách các resource mà role đó được phép truy cập. Phía dưới có 1 api lấy ra danh sách này nên yên tâm nó gồm những cái gì. Cứ gửi grants theo định dạng bên dưới là được"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                username:
                  example: "0312381234"
                password:
                  type: string
                  example: "3123213123"
                role: 
                  type: string
                  example: "other"
                full_name:
                  type: string
                  example: "Lưu Đức Hải"
                position:
                  type: string
                  example: "Nhân viên phục vụ"
                experience:
                  type: string
                  example: "1 năm"
                grants:
                  type: array
                  items: 
                    type: object
                    properties:
                      resource: 
                        type: string
                        example: menu
                      actions: 
                        type: array
                        items:
                          type: string
                        example: ["read:any", "update:any", "delete:any", "create:any"]
        required: true
      responses:
        '200':
          description: Tạo tài khoản thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Tài khoản 0312381234 được tạo thành công
                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Tên người dùng quá ngắn                        
                    
  /admin/get-resource-rbac:
    get:
      tags:
        - auth 
      summary: Lấy danh sách các quyền (quản lý nhà hàng)
      description: Khi tạo tài khoản nhân viên, quản lý nhà hàng sẽ phân quyền cho nhân viên đó, nếu role là cashier hay waistaff thì không cần lấy API danh sách các tài nguyên này. Nhưng nếu quản lý tick vào role other, thì phải call API để hiện danh sách các tài nguyên ra. Dựa trên danh sách phản hồi phía dưới mà hiển thị sao cho đẹp mắt. Resource là các mục lớn bên ngoài, actions là thao tác với resource đó (nhớ lấy name tiếng việt để hiển thị cho đẹp, mấy cái tiếng anh là id khi gửi lên server thôi). Có thể xem kĩ hơn danh sách tại api-gateway/reference-data/sample...json
      responses:
        '200':
          description: Lấy danh sách thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Lấy danh sách các quyền thành công
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        resource: 
                          type: string
                          example: menu
                        name: 
                          type: string
                          example: Thực đơn
                        actions: 
                          type: object
                          properties:
                            name:
                              type: string
                              example: Xem danh sách
                            slug:
                              type: string
                              example: read:any
                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi gì đó  
                    
  /admin/get-employees:
    get:
      tags:
        - auth 
      summary: Lấy danh sách nhân viên 
      description: Gồm thông tin cá nhân của nhân viên, không bao gồm thông tin tài khoản và thông tin phân quyền, nếu cần thì thêm API
      responses:
        '200':
          description: Lấy danh sách thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách nhân viên thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 093213213212
                            full_name: 
                              type: string
                              example: Đức hải
                            gender: 
                              type: string
                              example: nam
                            phone_number: 
                              type: string
                              example: 0123213123
                            address: 
                              type: string
                              example: Quận 7
                            birthday: 
                              type: string
                              format: date-time
                              example: 2002-08-15T00:00:00.000Z
                            email: 
                              type: string
                              example: admin@gmail.com
                        example: [
                          {
                            _id: 093213213212,
                            full_name: Đức hải,
                            gender: nam,
                            phone_number: 0123213123,
                            address: Quận 7,
                            birthday: "2002-08-15T00:00:00.000Z",
                            email: admin@gmail.com
                          }
                        ]


                 
        '400':
          description: Có nhiều trường hợp lỗi
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi gì đó  
  
  /admin/area/create:
    post:
      tags:
        - area
      summary: Tạo mới khu vực
      description: "Tạo mới khu vực"
      requestBody: 
        description: name, description, price_percentage mặc định là 0 (đây là 1 option). Nó là phần trăm giảm giá, nếu bằng 0 tức là giá gốc của món ăn, < 0 tức là % giảm của món (nhân viên thì được giảm giá chẳng hạn), > 0 tức là giá tăng hơn so với món (menu ở các app thứ 3 thì giá cao hơn)
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name:
                  type: string
                  example: "Tầng 1"
                description:
                  type: string
                  example: "Mô tả"
                price_percentage:
                  type: number
                  example: 0
        required: true
      responses:
        '200':
          description: Tạo thành công, data là object của khu vực mới tạo
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Đã thêm khu vực thành công
                  data: 
                    type: object
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó
                    
  /admin/area/get-all:
    get:
      tags:
        - area
      summary: Lấy danh sách khu vực
      description: "Lấy danh sách khu vực"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: number
                            example: 21
                          name: 
                            type: string
                            example: Tầng 1
                          price_percentage: 
                            type: number
                            example: 0
                          description: 
                            type: string
                            example: Mô tả
                          created_at: 
                            type: string
                            format: date-time
                            example: 2024-02-23T11:14:15.000Z
                          updated_at: 
                            type: string
                            format: nullable
                            example: 2024-02-23T11:14:15.000Z
                          deleted_at: 
                            type: string
                            format: nullable
                            example: 0000-00-00T00:00:00.000Z
                          isDeleted: 
                            type: boolean
                            example: false
        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó 
                      
  /admin/area/update/{id}:
    put:
      tags:
        - area
      summary: Cập nhật khu vực
      description: "Cập nhật khu vực"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
      requestBody: 
        description: Tên khu vực
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name:
                  type: string
                  example: "Khu vực abc"
        required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật khu vực thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"
  
  /admin/area/delete/{id}:
    delete:
      tags:
        - area
      summary: Xóa khu vực
      description: "Xóa khu vực"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Xóa khu vực thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
  
  /admin/table/create:
    post:
      tags:
        - table
      summary: Tạo mới bàn
      description: Tạo mới bàn
      requestBody: 
        description: Mã bàn và mã của khu vực
        content: 
          application/json:
            schema:
              type: object
              properties: 
                id:
                  type: string
                  example: "A01"
                area_id:
                  type: number
                  example: 20
        required: true
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status: 
                    type: string
                    example: success
                  message: 
                    type: string
                    example: Đã thêm bàn thành công
                  data: 
                    type: object
                    properties: 
                      id: 
                        type: string
                        example: A01
                      area_id: 
                        type: number
                        example: 20
                      created_at: 
                        type: string
                        format: date-time
                        example: 2024-02-23T12:46:11.994Z
                      isDeleted: 
                        type: boolean
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó
                    
  /admin/table/create-auto:
    post:
      tags:
        - table
      summary: Tạo mới bàn 1 cách tự động
      description: 1 khu vực có nhiều bàn nên nếu thêm từng bàn sẽ mất thời gian, cần có cơ chế tạo nhanh
      requestBody: 
        description: shortname là tên viết tắt của khu vực đó, quantity là số lượng bàn muốn tạo, from là số bàn muốn bắt đầu (optional, nếu không có thì mặc định bắt đầu từ số 1), area_id là mã khu vực
        content: 
          application/json:
            schema:
              type: object
              properties: 
                shortname:
                  type: string
                  example: "A"
                quantity:
                  type: number
                  example: 3
                from:
                  type: number
                  example: 11
                area_id:
                  type: number
                  example: 2
        required: true
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Tạo thành công bàn tự động
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: string
                            example: A11
                      example: [
                          id: A11
                      ]


        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó   
                    
  /admin/table/get-tables:
    get:
      tags:
        - table
      summary: Lấy danh sách bàn theo mã khu vực
      description: "Lấy danh sách bàn theo mã khu vực chứ không hiển thị ra một lúc toàn bộ bàn"
      parameters:
        - in: query
          name: area_id
          schema:
            type: integer
            example: 2
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            id: 
                              type: string
                              example: A11
                            area_id: 
                              type: number
                              example: 25
                            created_at: 
                              type: string
                              format: date-time
                              example: 2024-02-28T14:40:43.000Z
                            updated_at: 
                              type: string
                              format: nullable
                            deleted_at: 
                              type: string
                              format: nullable
                            isDeleted: 
                              type: boolean
                        example: [
                          {
                            id: A11,
                            area_id: 25,
                            created_at: "2024-02-28T14:40:43.000Z",
                            updated_at: null,
                            deleted_at: null,
                            isDeleted: false
                          }
                        ]

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó   
                      
  /admin/table/delete/:
    patch:
      tags:
        - table
      summary: Xóa các bàn (Phương thức delete không phải patch)
      description: Xóa nhiều bàn 1 lúc thay vì 1, nếu chỉ có 1 bàn thì cũng đưa vào array gồm 1 phần tử để xóa. Front end thiết kế cái nút tick để tick vào nhiều bàn xóa. Dùng delete không phải patch nha, tại swagger không cho xài delete với body
      requestBody: 
        description: Danh sách id của các bàn
        content: 
          application/json:
            schema:
              type: object
              properties: 
                ids: 
                  type: array
                  items: 
                    type: number
                  example: [A13, A12, A11]
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Xóa các bàn thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 

  /admin/printer/create:
    post:
      tags:
        - printer
      summary: Tạo mới máy in 
      description: Chủ yếu là lưu thông tin máy in vào database, xem như là đã kết nối với máy in, khi in bill sẽ đính kèm tên máy in vào để fake máy in
      requestBody: 
        description: "Tên, địa chỉ ip (đúng định dạng ipv4, địa chỉ nào cũng được), area_id và printer_type là loại máy in, có 3 loại chính là 1: in hóa đơn, 2: in món ăn, 3: in nước uống. Phía dưới có api để lấy ra các loại máy in"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name: 
                  type: string
                  example: Máy in trệt
                ip_address: 
                  type: string
                  example: 192.168.0.1
                printer_type: 
                  type: number
                  example: 1
                area_id: 
                  type: number
                  example: 1
        required: true
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status: 
                    type: string
                    example: success
                  message: 
                    type: string
                    example: Thêm máy in thành công
                  data: 
                    type: object
                    properties: 
                      name: 
                        type: string
                        example: Máy in trệt
                      ip_address: 
                        type: string
                        example: 192.168.0.1
                      printer_type: 
                        type: number
                        example: 1
                      area_id: 
                        type: number
                        example: 1
                      created_at: 
                        type: string
                        format: date-time
                        example: 2024-02-23T13:05:46.177Z
                      id: 
                        type: number
                        example: 14
                      isDeleted: 
                        type: boolean
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó          
  
  /admin/printer/get-all:
    get:
      tags:
        - printer
      summary: Lấy danh sách máy in
      description: "Danh sách máy in. Không có tham số gì hết"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    id: 
                      type: number
                      example: 6
                    name: 
                      type: string
                      example: Máy in tầng 1
                    ip_address: 
                      type: string
                      example: 192.168.0.1
                    printer_type: 
                      type: number
                      example: 1
                    area_id: 
                      type: number
                      example: 2
                    created_at: 
                      type: string
                      format: date-time
                      example: 2024-02-19T15:08:37.000Z
                    updated_at: 
                      type: string
                      format: date-time
                      example: 2024-02-19T15:29:06.000Z
                    deleted_at: 
                      type: string
                      format: nullable
                    isDeleted: 
                      type: boolean
                    printer_type_name: 
                      type: string
                      example: In hóa đơn
                example: [
                  {
                    id: 6,
                    name: Máy in tầng 1,
                    ip_address: 192.168.0.1,
                    printer_type: 1,
                    area_id: 2,
                    created_at: "2024-02-19T15:08:37.000Z",
                    updated_at: "2024-02-19T15:29:06.000Z",
                    deleted_at: null,
                    isDeleted: false,
                    printer_type_name: In hóa đơn
                  }
                ]
        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó
                      
  /admin/printer/get-printer-type:
    get:
      tags:
        - printer
      summary: Lấy danh sách loại máy in
      description: "Dùng khi tham máy in, front end sẽ call api này để hiển thị các tùy chọn của loại máy in"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Thành công
                    data: 
                      type: object
                      properties: 
                        1: 
                          type: string
                          example: In hóa đơn
                        2: 
                          type: string
                          example: In món ăn
                        3: 
                          type: string
                          example: In nước uống

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó          
                      
  /admin/printer/update/{id}:
    put:
      tags:
        - printer
      summary: Cập nhật máy in
      description: "Cập nhật máy in"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 2          
          required: true
      requestBody: 
        description: Tham số body gồm name, ip_address, printer_type, area_id. Các tham số đều là tùy chọn
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name: 
                  type: string
                  example: Máy in tầng 1
                ip_address: 
                  type: string
                  example: 192.168.0.1
                printer_type: 
                  type: number
                  example: 1
                area_id: 
                  type: number
                  example: 2
        required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật máy in thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"                      
            
  /admin/printer/delete/{id}:
    delete:
      tags:
        - printer
      summary: Xóa máy in
      description: Xóa máy in
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đã xóa máy in thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"           
          
  /admin/category/create:
    post:
      tags:
        - category
      summary: Tạo mới danh mục
      description: Tạo mới danh mục
      requestBody: 
        description: Tên danh mục
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name:
                  type: string
                  example: "Chay mặn"
        required: true
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status: 
                    type: string
                    example: success
                  message: 
                    type: string
                    example: Đã thêm danh mục món thành công
                  data: 
                    type: object
                    properties: 
                      name: 
                        type: string
                        example: Chay mặn
                      created_at: 
                        type: string
                        format: date-time
                        example: 2024-02-23T13:33:57.521Z
                      id: 
                        type: number
                        example: 2
                      isDeleted: 
                        type: boolean
                        example: false
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó        
                    
  /admin/category/get-all:
    get:
      tags:
        - category
      summary: Lấy danh sách danh mục
      description: "Lấy danh sách danh mục, không tham số"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            id: 
                              type: number
                              example: 1
                            name: 
                              type: string
                              example: Bàn chay mặn đều được ha
                            created_at: 
                              type: string
                              format: date-time
                              example: 2024-02-15T12:56:03.000Z
                            updated_at: 
                              type: string
                              format: date-time
                              example: 2024-02-15T13:20:00.000Z
                            deleted_at: 
                              type: string
                              format: date-time
                              example: 2024-02-15T13:21:40.000Z
                            isDeleted: 
                              type: boolean
                        example: [
                          {
                            id: 1,
                            name: Bàn chay mặn đều được ha,
                            created_at: "2024-02-15T12:56:03.000Z",
                            updated_at: "2024-02-15T13:20:00.000Z",
                            deleted_at: "2024-02-15T13:21:40.000Z",
                            isDeleted: false
                          }
                        ]
        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó                
                      
  /admin/category/update/{id}:
    put:
      tags:
        - category
      summary: Cập nhật danh mục
      description: "Cập nhật danh mục"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      requestBody: 
        description: Tên danh mục
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name:
                  type: string
                  example: "Danh mục chay mặn"
        required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật danh mục thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"                      
            
  /admin/category/delete/{id}:
    delete:
      tags:
        - category
      summary: Xóa danh mục
      description: Xóa danh mục
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đã xóa danh mục thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"             
            
  /admin/menu/create:
    post:
      tags:
        - menu
      summary: Tạo mới thực đơn
      description: Tạo mới thực đơn, vì có upload ảnh nên các dữ liệu sẽ để trong form-data, ảnh sau khi đưa lên server sẽ được upload qua bên thứ 3 là cloudinary để lưu trữ
      requestBody:
        content:
          multipart/form-data: 
            schema:            
              type: object
              properties:      
                image:            
                  type: string
                  format: binary
                name:
                  type: string
                  example: "Món chay 1"
                price:
                  type: number
                  example: 50000
                category_id:
                  type: number
                  example: 1
                description:
                  type: string
                  example: Mô tả của món ăn
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status: 
                    type: string
                    example: success
                  message: 
                    type: string
                    example: Thêm thực đơn thành công
                  data: 
                    type: object
                    properties: 
                      name: 
                        type: string
                        example: Món chay nè
                      description: 
                        type: string
                        example: Mô tả của món ăn
                      image: 
                        type: string
                        example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708698061/qtyigxjpzbc2xxaqwofq.png
                      price: 
                        type: number
                        example: 123
                      category_id: 
                        type: number
                        example: 2
                      created_at: 
                        type: string
                        format: date-time
                        example: 2024-02-23T14:21:02.257Z
                      id: 
                        type: number
                        example: 18
                      status: 
                        type: boolean
                      isDeleted: 
                        type: boolean

        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó           
                    
  /admin/menu/get-all:
    get:
      tags:
        - menu
      summary: Lấy danh sách thực đơn
      description: "Lấy danh sách thực đơn, có sử dụng kĩ thuật phân trang, do thực đơn có nhiều món, nếu load quá nhiều sẽ không hiển thị hết được. Tham số tại param: page và perPage. page là số thứ tự của trang muốn lấy, perPage là muốn phân ra mỗi trang bao nhiêu cột dữ liệu. page và perPage đều không bắt buộc. Mặc định page là 1 và perPage là 10, tức là ví dụ có 30 bản ghi thì chia perPage là 10 tức là có 3 trang, page là vị trí của số trang muốn lấy. Sau khi call api, server sẽ trả về kết quả của việc phân trang như trong response bên dưới, hãy dùng kết quả đó để hiện thị dấu phân trang cho phù hợp"
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            example: 2
        - in: query
          name: perPage
          schema:
            type: integer
            example: 5  
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    paginationResult: 
                      type: object
                      properties: 
                        currentPage: 
                          type: string
                          example: 2
                        totalItems: 
                          type: number
                          example: 16
                        eachPage: 
                          type: string
                          example: 5
                        totalPage: 
                          type: number
                          example: 4
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: number
                            example: 5
                          name: 
                            type: string
                            example: 
                          description: 
                            type: string
                            example: 
                          image: 
                            type: string
                            example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708099688/pcvljie2n1fcjjoqusog.png
                          price: 
                            type: number
                            example: 0
                          status: 
                            type: boolean
                          category_id: 
                            type: number
                            example: 0
                          created_at: 
                            type: string
                            format: date-time
                            example: 2024-02-16T16:08:08.000Z
                          updated_at: 
                            type: string
                            format: nullable
                          deleted_at: 
                            type: string
                            format: nullable
                          isDeleted: 
                            type: boolean
                      example: [
                        {
                          id: 5,
                          name: "Món chay 0",
                          description: "Mô tả của món ăn",
                          image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708099688/pcvljie2n1fcjjoqusog.png",
                          price: 0,
                          status: true,
                          category_id: 0,
                          created_at: "2024-02-16T16:08:08.000Z",
                          updated_at: null,
                          deleted_at: null,
                          isDeleted: false  
                        }
                      ]

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó              
                      
  /admin/menu/update/{id}:
    put:
      tags:
        - menu
      summary: Cập nhật thực đơn
      description: "Tương tự như lúc thêm, dùng form data, chỉ khác là các tham số đều là tùy chọn chứ không bắt buộc"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      requestBody:
        content:
          multipart/form-data: 
            schema:            
              type: object
              properties:      
                image:            
                  type: string
                  format: binary
                name:
                  type: string
                  example: "Món chay 1"
                price:
                  type: number
                  example: 50000
                category_id:
                  type: number
                  example: 1
                description:
                  type: string
                  example: Mô tả của món ăn
        required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật thực đơn thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"                       
            
  /admin/menu/get-by-category/{id}:
    get:
      tags:
        - menu
      summary: Lấy thực đơn theo mã danh mục
      description: "Truyền mã danh mục vào đường dẫn"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: number
                            example: 15
                          name: 
                            type: string
                            example: Món chay 0
                          description: 
                            type: string
                            example: Mô tả của món ăn
                          image: 
                            type: string
                            example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708162236/ybn9l7vcpnvahtjfnbr2.png
                          price: 
                            type: number
                            example: 123
                          status: 
                            type: boolean
                          category_id: 
                            type: number
                            example: 1
                          created_at: 
                            type: string
                            format: date-time
                            example: 2024-02-17T09:30:38.000Z
                          updated_at: 
                            type: string
                            format: nullable
                          deleted_at: 
                            type: string
                            format: nullable
                          isDeleted: 
                            type: boolean
                      example: [
                        {
                          id: 15,
                          name: Món chay 0,
                          description: Mô tả của món ăn,
                          image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708162236/ybn9l7vcpnvahtjfnbr2.png",
                          price: 123,
                          status: true,
                          category_id: 1,
                          created_at: "2024-02-17T09:30:38.000Z",
                          updated_at: null,
                          deleted_at: null,
                          isDeleted: false
                        }  
                      ]
  
        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó            
                      
  /admin/menu/delete/{id}:
    delete:
      tags:
        - menu
      summary: Xóa thực đơn
      description: Xóa thực đơn
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đã xóa thực đơn thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"                       
            
  /admin/menu/search:
    get:
      tags:
        - menu
      summary: Tìm kiếm thực đơn theo từ khóa
      description: "Có 2 trường hợp có thể sử dụng tìm kiếm. 1 là tìm kiếm theo từ khóa rõ ràng. Ví dụ: keyword: chay -> Món chay 1. Tùy chọn tìm kiếm 2 là theo từ khóa viết tắt. Ví dụ: mc -> Món chay 1. Khi search với keyword thì server sẽ áp dụng cả 2 cách search này lên từ khóa để trả về kết quả mong muốn"
      parameters:
        - in: query
          name: keyword
          schema:
            type: integer
            example: mc
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: number
                            example: 11
                          name: 
                            type: string
                            example: Món chay 1
                          description: 
                            type: string
                            example: 
                          image: 
                            type: string
                            example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708150773/jy2ydeshn1g5kqj2odxx.png
                          price: 
                            type: number
                            example: 123
                          status: 
                            type: boolean
                          category_id: 
                            type: number
                            example: 2
                          created_at: 
                            type: string
                            format: date-time
                            example: 2024-02-17T06:19:34.000Z
                          updated_at: 
                            type: string
                            format: nullable
                          deleted_at: 
                            type: string
                            format: nullable
                          isDeleted: 
                            type: boolean
                      example: [
                        {
                          id: 11,
                          name: Món chay 1,
                          description: "Mô tả",
                          image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1708150773/jy2ydeshn1g5kqj2odxx.png",
                          price: 123,
                          status: true,
                          category_id: 2,
                          created_at: "2024-02-17T06:19:34.000Z",
                          updated_at: null,
                          deleted_at: null,
                          isDeleted: false
                        }  
                      ]

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó                
            
  /admin/promotion/create:
    post:
      tags:
        - promotion
      summary: Tạo mới khuyến mãi
      description: Tạo mới khuyến mãi
      requestBody: 
        description: "Tên khuyến mãi, trạng thái khuyến mãi, ghi chú, form-promotion là hình thức áp dụng, 1 là cho tổng hóa đơn, 2 là cho món ăn cụ thể. Phía dưới có API để lấy danh sách form-promotion. condition_apply là điều kiện áp dụng, nếu form-promotion là 1: giảm tổng hóa đơn thì condition_apply là tổng hóa đơn, còn nếu là giảm cho món ăn thì condition_apply là mã của menu, condition_apply có kiểu number. promotion_value là giá trị khuyến mãi, nếu nhỏ hơn 0 thì là khuyến mãi, lớn hơn 0 là phụ phí (ví dụ ngày tết). promotion_value có 2 trường hợp, 1 là giảm theo %, 2 là giảm theo giá cụ thể, tham số nhận vào có thể là 1 số hoặc 1 số kèm theo %. Ví dụ 50%, -50% hoặc 10000 đều hợp lệ. auto_apply là tự động áp dụng (phía front end tick sẵn vào ô này), khuyến mãi sẽ bắt đầu áp dụng từ lúc tạo khuyến mãi, không muốn thì chọn false. Ngoài ra còn có 2 tham số là start_at, end_at, định dạng date, là ngày bắt đầu, kết thúc, 2 tham số này là tùy chọn nên có hay không cũng được. **Updated on 21/6:** Bổ sung thêm 1 tham số là text_email, nếu admin nhập thông tin vào ô này tức là sẽ gửi nội dung email khuyến mãi đến người dùng (để tiện thì người dùng nhập ô note tới đâu thì frontend copy qua ô text_email đến đó). Email sẽ được gửi tới cho các user đã verify email"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name: 
                  type: string
                  example: Khuyến mãi ngày tết
                status: 
                  type: boolean
                note: 
                  type: string
                  example: Ghi chú khuyến mãi
                form_promotion: 
                  type: number
                  example: 2
                condition_apply: 
                  type: number
                  example: 1
                promotion_value: 
                  type: string
                  example: 50%
                auto_apply: 
                  type: boolean    
                text_email: 
                  type: string
                  example: "Nhận ngay giảm giá đến 50% khi đặt bàn trực tuyến. Chương trình áp dụng từ 10/6/2024 đến 20/6/2024."
        required: true
      responses:
        '200':
          description: Tạo thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Thêm khuyến mãi thành công
                    data: 
                      type: object
                      properties: 
                        name: 
                          type: string
                          example: Khuyến mãi ngày tết
                        status: 
                          type: boolean
                        note: 
                          type: string
                          example: Ghi chú khuyến mãi
                        form_promotion: 
                          type: number
                          example: 2
                        condition_apply: 
                          type: number
                          example: 1
                        promotion_value: 
                          type: string
                          example: 50
                        auto_apply: 
                          type: boolean
                        created_at: 
                          type: string
                          format: date-time
                          example: 2024-02-23T13:50:54.834Z
                        id: 
                          type: number
                          example: 3
                        isDeleted: 
                          type: boolean
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó 
                    
  /admin/promotion/get-all:
    get:
      tags:
        - promotion
      summary: Lấy danh sách khuyến mãi
      description: "Danh sách khuyến mãi. Không có tham số gì hết"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          id: 
                            type: number
                            example: 1
                          name: 
                            type: string
                            example: Khuyến mãi ngày tết nè he he
                          status: 
                            type: boolean
                          note: 
                            type: string
                            example: Ghi chú khuyến mãi
                          form_promotion: 
                            type: number
                            example: 2
                          condition_apply: 
                            type: number
                            example: 1
                          promotion_value: 
                            type: string
                            example: 50
                          auto_apply: 
                            type: boolean
                          start_at: 
                            type: string
                            format: nullable
                          end_at: 
                            type: string
                            format: nullable
                          created_at: 
                            type: string
                            format: date-time
                            example: 2024-02-18T06:35:08.000Z
                          updated_at: 
                            type: string
                            format: date-time
                            example: 2024-02-18T15:21:37.000Z
                          deleted_at: 
                            type: string
                            format: nullable
                          isDeleted: 
                            type: boolean
                          form_promotion_name: 
                            type: string
                            example: Áp dụng cho món ăn cụ thể
                      example: [
                        {
                          id: 1,
                          name: Khuyến mãi ngày tết,
                          status: false,
                          note: Ghi chú khuyến mãi,
                          form_promotion: 2,
                          condition_apply: 1,
                          promotion_value: 50,
                          auto_apply: true,
                          start_at: null,
                          end_at: null,
                          created_at: "2024-02-18T06:35:08.000Z",
                          updated_at: "2024-02-18T15:21:37.000Z",
                          deleted_at: null,
                          isDeleted: false,
                          form_promotion_name: Áp dụng cho món ăn cụ thể  
                        }
                      ]

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó                  
                      
  /admin/promotion/update/{id}:
    put:
      tags:
        - promotion
      summary: Cập nhật khuyến mãi
      description: "Cập nhật khuyến mãi"
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      requestBody: 
        description: Các thông tin của khuyến mãi cần cập nhật, tất cả đều là tùy chọn
        content: 
          application/json:
            schema:
              type: object
              properties: 
                name: 
                  type: string
                  example: Khuyến mãi ngày tết 
                status: 
                  type: boolean
                note: 
                  type: string
                  example: Ghi chú khuyến mãi
                form_promotion: 
                  type: number
                  example: 2
                condition_apply: 
                  type: number
                  example: 1
                promotion_value: 
                  type: string
                  example: 50%

        required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật khuyến mãi thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"                        
            
  /admin/promotion/get-form-promotion:
    get:
      tags:
        - promotion
      summary: Lấy hình thức khuyến mãi 
      description: "Lấy hình thức khuyến mãi (form-promotion)"
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Thành công
                      data: 
                        type: object
                        properties: 
                          1: 
                            type: string
                            example: Áp dụng cho tổng hóa đơn
                          2: 
                            type: string
                            example: Áp dụng cho món ăn cụ thể

        '400':
            description: "Lỗi"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status:
                      type: string
                      example: error
                    message:
                      type: string
                      example: Lỗi nào đó           
                      
  /admin/promotion/delete/{id}:
    delete:
      tags:
        - promotion
      summary: Xóa khuyến mãi
      description: Xóa khuyến mãi
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 1
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đã xóa khuyến mãi thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"    
            
  /order/menu/get-list:
    get:
      tags:
        - order
      summary: Lấy danh sách menu để đặt món
      description: Tương tự như việc lấy menu trong managemenet service, sẽ có phân trang gồm parameter là page và perPage, page là số trang và perPage là số item mỗi trang, tất cả đều là tùy chọn
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            example: 1
          required: false
          
        - in: query
          name: perPage
          schema:
            type: integer
            example: 1
          required: false
      responses:
        '200':
            description: Thành công. Lưu ý, nếu data trả về có trường discount_price thì đó là giá khuyến mãi. Hiển thị giá gốc -> gạch ngang, để giá mới lên
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    paginationResult: 
                      type: object
                      properties: 
                        currentPage: 
                          type: string
                          example: 1
                        totalItems: 
                          type: number
                          example: 16
                        eachPage: 
                          type: number
                          example: 10
                        totalPage: 
                          type: number
                          example: 2
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          _id: 
                            type: number
                            example: 55
                          name: 
                            type: string
                            example: Món chay nè he
                          description: 
                            type: string
                            example: Mô tả của món ăn
                          image: 
                            type: string
                            example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709623528/x4bci4dqrvntnmagehtu.png
                          price: 
                            type: number
                            example: 123
                          status: 
                            type: boolean
                          category_id: 
                            type: number
                            example: 2
                          menu_type: 
                            type: number
                            example: 1
                          isDeleted: 
                            type: boolean
                          discount_price: 
                            type: string
                            format: nullable
                      example: [
                        {
                          _id: 55,
                          name: Món chay nè he,
                          description: Mô tả của món ăn,
                          image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709623528/x4bci4dqrvntnmagehtu.png",
                          price: 123,
                          status: true,
                          category_id: 2,
                          menu_type: 1,
                        }
                      ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"
            
  /order/menu/get-by-category/{id}:
    get:
      tags:
        - order
      summary: Lấy danh sách menu theo mã danh mục
      description: Tương tự như việc lấy menu trong managemenet service
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 2
          required: true
          
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Lấy danh sách thành công
                    paginationResult: 
                      type: object
                      properties: 
                        currentPage: 
                          type: string
                          example: 1
                        totalItems: 
                          type: number
                          example: 16
                        eachPage: 
                          type: number
                          example: 10
                        totalPage: 
                          type: number
                          example: 2
                    data: 
                      type: array
                      items: 
                        type: object
                        properties: 
                          _id: 
                            type: number
                            example: 55
                          name: 
                            type: string
                            example: Món chay nè he
                          description: 
                            type: string
                            example: Mô tả của món ăn
                          image: 
                            type: string
                            example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709623528/x4bci4dqrvntnmagehtu.png
                          price: 
                            type: number
                            example: 123
                          status: 
                            type: boolean
                          category_id: 
                            type: number
                            example: 2
                          menu_type: 
                            type: number
                            example: 1
                          isDeleted: 
                            type: boolean
                          discount_price: 
                            type: string
                            format: nullable
                      example: [
                        {
                          _id: 55,
                          name: Món chay nè he,
                          description: Mô tả của món ăn,
                          image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709623528/x4bci4dqrvntnmagehtu.png",
                          price: 123,
                          status: true,
                          category_id: 2,
                          menu_type: 1,
                        }
                      ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"  
            
  /admin/order/tables/{id}:
    get:
      tags:
        - order
      summary: Lấy danh sách bàn theo mã khu vực
      description: Dùng cho trường hợp nhân viên muốn vào xem danh sách các bàn hiện có
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            example: 2
          required: true
          
      responses:
        '200':
            description: Thành công. Status là cái để hiển thị lên giao diện. 0 là chưa có ai ngồi, 1 là có người đang ngồi, 2 là bàn đã đặt trước. Slug là cái dùng để thao tác để đặt món hoặc load món trong bàn (để phòng tránh gian lận nếu để id của bàn lên thẳng đường link thì khách hàng có thể dựa trên điều này để order món vào bàn khác). Các api sẽ có các trường hợp dùng đến tableSlug này
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách bàn thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: A21
                            status: 
                              type: number
                              example: 1
                            slug: 
                              type: string
                              example: e326fc31-1531-4587-853f-588404860af9
                        example: [
                          {
                            _id: A21,
                            status: 1,
                            slug: e326fc31-1531-4587-853f-588404860af9
                          }
                        ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"      
            
  /order/{tableSlug}:
    post:
      tags:
        - order
      summary: Đặt món (dùng cho cả nhân viên và khách hàng)
      description: "Table Slug là thông tin load được từ api trước. Đường dẫn ví dụ như `/api/order/view-order/e326fc31-1531-4587-853f-588404860af9` để tránh việc lộ đường dẫn nhằm tránh khách hàng đặt món sang các bàn khác. Đặc biệt là, api này sẽ dùng cho cả trường hợp khách hàng đặt món lần đầu và thêm món. Khi vào trang đặt món, front end phải load thông tin món ở api phía dưới xem bàn này đang có món nào không (`if data === null`). Nếu đã có món thì load lên tổng giá (subtotal) để khách hàng biết là đã đặt các món trước đó, nếu khách có nhu cầu xem lại món thì mới hiện full món đã đặt. Còn nếu chưa có món thì bỏ qua, khách hàng cứ việc chọn món và gửi đến api này. CẬP NHẬT MỚI: Khách hàng sẽ quét mã QR đến đường dẫn frontend như: /order/at-restaurant/validate?token=... Khi mở trang này ra, đầu tiên front end phải gửi 1 api lên server để xác minh là tableSlug này có hợp lệ không, nếu lỗi thì hiển thị message lỗi, nếu thành công thì chuyển hướng trang đặt món. API doc: /order/verify-slug/{tableSlug}. Mục đích của chuyển hướng trang là xóa đi url cũ (vì có tableslug ở đó, người dùng có thể vào lại url này) và cũng là để hiển thị danh sách món ăn để đặt và tên của bàn đó (có trong response trả về). Lưu ý: khi chuyển hướng trang phải dùng: window.location.replace('/order/at-restaurant'), mục đích là để xóa lịch sử url web cũ có dính token. Ngoài ra, lưu tableSlug đó vào cookie, set thời gian hết hạn khoảng 30 phút. Mục đích là giúp người dùng không cần phải quét lại QR nữa. Mục đích lưu trong cookie còn để giúp frontend lấy ra tableSlug nữa (Vì api đặt món là /order/{tableSlug}, nên frontend phải lấy slug trong cookie để đính kèm vào api này). Khi người dùng vào lại lần 2 tại trang đặt món: /order/at-restaurant. Frontend gửi request lên lại api lúc nãy /order/verify-slug/{tableSlug}, trong đó tableSlug để là số 1 (hoặc số nào cũng được), server sẽ check trong cookie của người dùng trước, nếu có tableSlug thì lấy ra để verify, không thì mới dùng tới tableSlug trên url. Nếu res thành công thì frontend hiển thị lại trang đặt món. Ngoài ra, ở góc màn hình có chỗ để xem danh sách các món đã đặt (/order/view-order/{tableSlug}) và nút thanh toán (lưu ý là gọi API thanh toán thì amount là toàn bộ số tiền của hóa đơn đó -> thanh toán làm sau cũng được). Khi hiển thị danh sách món đã đặt, có thể phân chia theo số lần đặt, lần 1 gồm các món ABC, trong database mới cập nhật thêm tên món để hiển thị cho dễ nhìn) Xử lý phía server (xem cho biết): Khi khách hàng vào quét QR và chuyển hướng sang trang đặt món như /order/at-restaurant, tableSlug sẽ được lưu vào bộ nhớ cache với thời gian hết hạn = khoảng 30 phút. Nếu khách vào đặt món lần 2: vào lại link cũ: /order/at-restaurant, frontend gửi api xác thực giống lúc nãy, server tự động lấy cookie ra để xác thực có hợp lệ không để không phải bắt quét lại QR. Trong trường hợp khách hàng chuyển bàn (hoặc thanh toán), mình sẽ xóa tableSlug lưu trong cache, nên là dù cookie vẫn còn thời gian nhưng cache ở server không còn thì vẫn phải quét lại QR ở bàn mới để đặt món."
      parameters:
        - in: path
          name: tableSlug
          schema:
            type: string
            example: e326fc31-1531-4587-853f-588404860af9
          required: true
          
      requestBody: 
        description: Gửi 1 mảng thông tin các món gồm mã món, số lượng của món đó và ghi chú (tùy chọn). Phía backend sẽ tự động load ra các thông tin gồm giá, tên từng món, giá tổng, người đặt món, thời gian nên không cần gửi đính kèm các thông tin này.
        content: 
          application/json:
            schema:
              type: array
              items: 
                type: object
                properties: 
                  _id: 
                    type: string
                    example: 55
                  quantity: 
                    type: number
                    example: 2
                  note: 
                    type: string
                    example: Ghi chú món ăn    

        required: true
      responses:
        '200':
            description: Thành công. Thông tin gồm message với thông báo 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đặt món thành công
                    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"   
            
  /order/view-order/{tableSlug}:
    get:
      tags:
        - order
      summary: Xem các món có trong 1 bàn
      description: Dùng cho trường hợp xem các món có trong 1 bàn (dùng cho cả nhân viên và khách). Lưu ý rằng chỉ xem được danh sách các món có trong **các bàn đang mở**. Nếu bàn đã đóng thì phải xem lại lịch sử đơn hàng ở 1 api khác
      parameters:
        - in: path
          name: tableSlug
          schema:
            type: string
            example: e326fc31-1531-4587-853f-588404860af9
          required: true
          
      responses:
        '200':
            description: Thành công. _id ngoài cùng (như res dưới là `65e8465c9004814e249cb46e`) sẽ là mã của hóa đơn đó luôn. Lưu ý, order_detail là 1 mảng chứa danh sách cần lần đặt món. VD 1 khách hàng đặt món 2 lần thì mảng gồm 2 phần tử. Mỗi lần đặt món sẽ lưu trữ thông tin của người đặt (order person), thời gian, mã của lần đặt món đó menu là danh sách các món gồm id, số lượng, giá, ghi chú (nếu có)
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy danh sách order thành công
                        data: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 6658082f66e00619d3d484ff
                            order_detail: 
                              type: array
                              items: 
                                type: object
                                properties: 
                                  order_person: 
                                    type: object
                                    properties: 
                                      name: 
                                        type: string
                                        example: "Nhân viên: Hải"
                                  menu: 
                                    type: array
                                    items: 
                                      type: object
                                      properties: 
                                        _id: 
                                          type: number
                                          example: 4
                                        name: 
                                          type: string
                                          example: Bông cải xào tỏi
                                        quantity: 
                                          type: number
                                          example: 3
                                        price: 
                                          type: number
                                          example: 70000
                                        note: 
                                          type: string
                                          example: Không hành
                                        processing_status: 
                                          type: number
                                          example: 0
                                    example: [
                                        {
                                          _id: 4,
                                        name: Bông cải xào tỏi,
                                        quantity: 3,
                                        price: 70000,
                                        note: Không hành,
                                        processing_status: 0
                                        }
                                    ]
                                  time: 
                                    type: string
                                    format: date-time
                                    example: 2024-05-30T05:01:35.140Z
                                  _id: 
                                    type: string
                                    example: 6658082f66e00619d3d48500
                            subtotal: 
                              type: number
                              example: 6909000
                            discount: 
                              type: number
                              example: 0
                            surcharge: 
                              type: number
                              example: 0
                            table: 
                              type: string
                              example: A01
                            checkin: 
                              type: string
                              format: date-time
                              example: 2024-05-30T05:01:35.140Z
                            status: 
                              type: boolean


        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /order/promotion:
    get:
      tags:
        - order
      summary: Lấy danh sách khuyến mãi
      description: "Lấy danh sách các khuyến mãi cho việc giảm giá. Các chương trình giảm giá này sẽ áp dụng cho trường hợp tổng hóa đơn. Còn giảm giá theo món thì sẽ trừ thẳng vào menu (có discount_type khi load menu ra). Thông tin khuyến mãi hiển thị phía người dùng, không phải admin nên chỉ query các chương trình có status là true và ngày hiện tại nằm trong khoảng ngày bắt đầu và ngày kết thúc của khuyến mãi. Nhớ import database khuyến mãi trong /order-service/database/promotion. Sắp tới có thời gian sẽ triển khai luôn database online"
          
      responses:
        '200':
            description: Thành công. condition_apply là điều kiện hóa đơn phải đạt để giảm giá, còn promotion_value là giá trị giảm giá, có dấu % sẽ giảm theo %, không có thì giảm trực tiếp theo giá tiền
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                          status: 
                            type: string
                            example: success
                          message: 
                            type: string
                            example: Lấy khuyến mãi thành công
                          data: 
                            type: array
                            items: 
                              type: object
                              properties: 
                                _id: 
                                  type: number
                                  example: 1
                                name: 
                                  type: string
                                  example: Khuyến mãi mùa xuân
                                status: 
                                  type: boolean
                                note: 
                                  type: string
                                  example: Giảm giá trên tất cả các món ăn
                                description: 
                                  type: string
                                  example: Thưởng thức mùa xuân với các món ăn giảm giá đặc biệt.
                                condition_apply: 
                                  type: number
                                  example: 100
                                promotion_value: 
                                  type: string
                                  example: 20%
                                start_at: 
                                  type: string
                                  format: date-time
                                  example: 2024-06-01T00:00:00.000Z
                                end_at: 
                                  type: string
                                  format: date-time
                                  example: 2024-06-30T23:59:59.000Z
                            example: [
                                {
                                  _id: 1,
                                name: Khuyến mãi mùa xuân,
                                status: true,
                                note: Giảm giá trên tất cả các món ăn,
                                description: Thưởng thức mùa xuân với các món ăn giảm giá đặc biệt.,
                                condition_apply: 100000,
                                promotion_value: 20%,
                                start_at: "2024-06-01T00:00:00.000Z",
                                end_at: "2024-06-30T23:59:59.000Z"
                                }
                            ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"          
            
  /admin/order/close/{tableSlug}:
    post:
      tags:
        - order
      summary: Đóng bàn (dành cho nhân viên thu ngân)
      description: Bàn sẽ được thanh toán và đóng (Trạng thái thanh toán của bàn sẽ được đặt thành true và status của bàn sẽ chuyển về lại available - 0)
      parameters:
        - in: path
          name: tableSlug
          schema:
            type: string
            example: e326fc31-1531-4587-853f-588404860af9
          required: true
          
      requestBody: 
        description: Thông tin gồm ghi chú (nếu có) và phương thức thanh toán
        content: 
          application/json:
            schema:
              type: object
              properties: 
                note: 
                  type: string
                  example: Ghi chú
                payment_method: 
                  type: string
                  example: Tiền mặt              


        required: true
      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Đóng bàn thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"            
            
  /order/print-bill/{tableSlug}:
    get:
      tags:
        - order
      summary: Xuất hóa đơn
      description: Hóa đơn gồm thông tin gồm các món ăn, giá tiền, thành tiền, só lượng, người đặt món, thời gian ... Xuất hóa đơn chỉ áp dụng trường hợp chưa đóng bàn, bàn vẫn đang có người ngồi
      parameters:
        - in: path
          name: tableSlug
          schema:
            type: string
            example: e326fc31-1531-4587-853f-588404860af9
          required: true
      responses:
        '200':
            description: Thành công. Hóa đơn sẽ được gửi về dưới dạng 1 url trên cloud.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: In hóa đơn thành công
                      data: 
                        type: string
                        example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1710571634/65f46c694680f6195976cc84-1.pdf
    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /order/category/get-all:
    get:
      tags:
        - order
      summary: Lấy danh sách danh mục
      description: Lấy danh sách danh mục
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy danh sách thành công
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              _id: 
                                type: number
                                example: 1
                              name: 
                                type: string
                                example: Khai vị
                          example: [
                            {
                              _id: 1,
                              name: Khai vị,
                            }
                          ]
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"    
            
  /order/menu/search:
    get:
      tags:
        - order
      summary: Tìm kiếm món ăn để đặt món
      description: Tương tự như tìm kiếm menu ở management service, tìm theo từ khóa chính xác hoặc từ khóa viết tắt
      parameters:
        - in: query
          name: keyword
          schema:
            type: string
            example: gỏi
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Tìm kiếm thành công
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              _id: 
                                type: number
                                example: 1
                              name: 
                                type: string
                                example: Gỏi cuốn sốt đậu phộng
                              description: 
                                type: string
                                example: Với các nguyên liệu thanh đạm và đặc biệt là nước chấm “xốt đậu phộng” béo béo bùi bùi làm món Gỏi Cuốn Chay thêm ngon ăn hoài không chán đó nha!
                              image: 
                                type: string
                                example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709926819/wpu3gkpkqqpn4zgbbczs.jpg
                              price: 
                                type: number
                                example: 90000
                              status: 
                                type: boolean
                              category_id: 
                                type: number
                                example: 1
                              menu_type: 
                                type: number
                                example: 1
                          example: [
                            {
                              _id: 1,
                              name: Gỏi cuốn sốt đậu phộng,
                              description: Với các nguyên liệu thanh đạm và đặc biệt là nước chấm “xốt đậu phộng” béo béo bùi bùi làm món Gỏi Cuốn Chay thêm ngon ăn hoài không chán đó nha!,
                              image: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1709926819/wpu3gkpkqqpn4zgbbczs.jpg",
                              price: 90000,
                              status: true,
                              category_id: 1,
                              menu_type: 1
                            }
                          ]

    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"  
            
  /admin/order/move-table:
    get:
      tags:
        - order
      summary: Chuyển bàn (dành cho nhân viên)
      description: Khi khách có nhu cầu chuyển bàn, nhân viên sẽ thực hiện chuyển món của bàn đó sang 1 bàn khác cho khách. Lưu ý là chỉ được chuyển đến 1 bàn đang trống. Thao tác của chức năng này là nhân viên sẽ vào bàn hiện tại, bấm chuyển bàn, danh sách các bàn đang trống sẽ hiện ra, nhân viên bấm vào bàn mong muốn thì bàn sẽ chuyển. Lưu ý chuyển bàn ở đây nghĩa là chuyển toàn bộ món đang có trong 1 bàn sang 1 bàn khác
      parameters:
        - in: query
          name: from
          schema:
            type: string
            example: A01
          required: true
        
        - in: query
          name: to
          schema:
            type: string
            example: A02
          required: true
      responses:
        '200':
            description: Thành công
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Chuyển bàn thành công
    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /admin/order/get-revenue:
    get:
      tags:
        - order
      summary: Xem doanh thu
      description: Dùng để lấy doanh thu. Chỉ có những vai trò được cấp phép mới được truy cập. Theo mặc định, nếu không truyền tham số thì nó sẽ lấy doanh thu theo ngày. Nếu truyền query là from và to thì sẽ lấy theo từ ngày - đến ngày, định dạng ngày gửi lên phải là 'yyyy/mm/dd'. Với chức năng này, front end có thể tạo 4 mục, 1 là thống kê theo ngày hiện tại, 2 là thống kê theo tháng, 3 là theo năm, 4 là cho người dùng chọn ngày cụ thể, nói chung thiết kế sao cho hợp lý là được, tất cả đều gửi chung lên api này (chỉ khác ngày bắt đầu và kết thúc)
      parameters:
        - in: query
          name: from
          schema:
            type: string
            example: 2024-03-13
          required: false
        
        - in: query
          name: to
          schema:
            type: string
            example: 2024-03-15
          required: false
      responses:
        '200':
            description: Thành công. Revenue là doanh thu khoảng thời gian đó, num_clients là Lượt khách, discount là tổng giá đã giảm, surcharge là tổng giá đã phụ thu, sum_menu là tổng số món khách đã đặt trong khoảng thời gian đó. Hiển thị biểu đồ hay gì đó cũng được
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh thu thành công
                      data: 
                        type: object
                        properties: 
                          revenue: 
                            type: number
                            example: 500000
                          num_clients: 
                            type: number
                            example: 2
                          discount: 
                            type: number
                            example: 0
                          surcharge: 
                            type: number
                            example: 0
                          sum_menu: 
                            type: number
                            example: 8

    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"          
            
  /admin/order/create-qr:
    get:
      tags:
        - order
      summary: Tạo mã QR để đặt món (Nhân viên, quản lý nhà hàng)
      description: "Dùng để tạo mã QR đặt món, truyền vào 1 tham số là table tương ứng với mã bàn, backend sẽ trả về dữ liệu qr để người dùng có thể quét và đặt món. Sau khi tạo thành công sẽ nhận được data là 1 chuỗi base 64. Bởi vì phía backend không cần phải lưu trữ dữ liệu này làm gì nên nó sẽ không được upload lên cloud hay lưu trong local storage trên server hay database. Vì thế, trả thẳng base 64 về cho front end xử lý. Cách xử lý cho front end như sau: Tạo 1 thẻ a như sau: **< a id=\"downloadQR\" download=\"qrcode.png\" style=\"display: none;\" href=\"\">Download QR Code</ a>**. Sau đó, nhận được data thì đưa data base 64 đó vào href của thẻ a, tạo 1 sự kiện click cho thẻ a đó là qr code sẽ tự động tải về. Ngoài ra, để tiện cho việc demo, trên thanh header phía client có thể hiện thêm 1 mục là QR Đặt món, bấm vô chuyển hướng đến trang nào đó có sẵn danh sách qr để quét, có thể hiển thị luôn danh sách các đường link đặt món sẵn để thao tác"
      parameters:
        - in: query
          name: table
          schema:
            type: string
            example: A01
          required: true
      responses:
        '200':
            description: "Thành công. **Updated on 19/7:** Kết quả trả về thêm 1 đường link đặt món nữa, ngoài hiện mã QR thì có thêm nút copy để copy link và nút tải về để tải QR về"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Tạo QR bàn thành công
                        data: 
                          type: string
                          example: "data:image/png;base64iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAAAklEQVR4AewaftIAAAd6SURBVO3BQY4cSXAAQffE/P/LLh5DlwIK3cOlUmFmf7DWJQ5rXeSw1kUOa13ksNZFDmtd5LDWRQ5rXeSw1kUOa13ksNZFDmtd5LDWRQ5rXeSw1kUOa13khw+p/E0VT1Smim9SeVLxTSpvVEwqU8UbKn9TxScOa13ksNZFDmtd5Icvq/gmlTcqnqi8UTFVTCqTypOKSeVJxTepTBVvVHyTyjcd1rrIYa2LHNa6yA+/TOWNijdUnlQ8qfhExScqJpVJ5UnFk4pJZVKZKt5QeaPiNx3WushhrYsc1rrID+t/UflNFU8q3lB5UvH/yWGtixzWushhrYv8sB5VvKEyVUwqb1RMKlPFpDKpTBWTyk0Oa13ksNZFDmtd5IdfVvFfUpkqJpWp4onKJyomlTcqJpWp4onKN1X8Sw5rXeSw1kUOa13khy9T+S9VTCqfUJkqJpWpYlKZKp5UTCpTxRsqU8Wk8obKv+yw1kUOa13ksNZF7A/+D1N5UjGpvFExqXyi4onKVPFEZar4/+yw1kUOa13ksNZFfviQylQxqXxTxVQxqTypmFSmiicVk8pU8URlqvhExaQyVUwqU8UTlW+q+E2HtS5yWOsih7Uu8sOXqUwVk8pUMalMFU9UPlExqUwVk8pU8URlqphUpoonKm+oTBWTypOKN1Smikllqvimw1oXOax1kcNaF/nhQxWTyhsqU8Wk8k0qU8UnVKaKqWJSmSqeqEwVk8qTikllqphUnqhMFVPFGypTxScOa13ksNZFDmtdxP7gP6TypOKbVJ5UPFGZKp6o/E0Vb6g8qZhU3qh4ojJVfOKw1kUOa13ksNZFfviQyjdVTCpTxaQyVUwqTyq+SeUTFZPKVPFEZaqYVN5QmSomlScqf9NhrYsc1rrIYa2L/PChiknlScWkMqlMFd9UMam8UTGpTBVPVKaKJxWTylQxVUwqU8WkMlU8UZkq3lCZKr7psNZFDmtd5LDWRewPPqDypOKJyhsVT1SmijdUPlExqUwVk8pUMalMFU9UPlHxCZWp4onKVPGJw1oXOax1kcNaF/nhl6k8qXhD5UnFpPKkYqp4ovJGxaTyRsUTlaniDZUnKm9U/JcOa13ksNZFDmtd5IcPVUwqb6j8TRWTylQxqUwVb6i8ofKk4onKVPGGypOKSeWJylQxVXzTYa2LHNa6yGGti9gffEDljYpJ5UnFpDJVvKHypGJS+UTFN6lMFU9Upoq/SeVJxTcd1rrIYa2LHNa6iP3BB1Smik+ovFHxL1OZKiaVqWJSmSqeqEwVk8qTiknlScUbKk8qPnFY6yKHtS5yWOsiP3yo4g2VNyqeqPxNFZPKVPFGxaTyiYpJ5Q2VqWJSeaIyVUwVk8o3Hda6yGGtixzWuoj9wQdUvqliUnlSMam8UfFEZap4ojJVfEJlqphUnlS8ofKkYlKZKiaVqeI3Hda6yGGtixzWusgPX1bxRGWqmFSmim+qmFR+k8qTiknlicpU8URlqphUpoonKlPFpDJVTCpTxTcd1rrIYa2LHNa6yA+/TOWNikllqnhSMalMKm9UTCpTxZOKT1S8ofJEZap4ovJE5Y2KSWWq+MRhrYsc1rrIYa2L2B/8Q1SmiknljYonKlPFpPKbKiaVNyreUJkq3lB5o+KJylTxicNaFzmsdZHDWhf54UMqTyomlScVk8qTit9UMak8qfimikllUnmj4onKk4pJZaqYVP6mw1oXOax1kcNaF7E/+IDKVDGpTBWTylTxROUTFZPKJyqeqEwVk8onKv4mlaniX3JY6yKHtS5yWOsiP/zjVJ5UTCpPVJ5UTCpPVKaKqWJSmSr+JpUnFZPKE5UnFZPKk4pPHNa6yGGtixzWusgP/xiVqWJSeVIxqUwV31TxROWJypOKJypTxSdUnlQ8UXlSMal802GtixzWushhrYv88MsqJpUnFZPKVPFE5Q2VqeINlW+qmFTeUJkqvknlScWk8jcd1rrIYa2LHNa6yA8fqnij4o2KJyp/U8UnVN6omFSeVEwqb1S8oTKpvFHxTYe1LnJY6yKHtS7yw4dU/qaKqWJSmSomlaniScWkMlU8UZkqJpUnKlPFpPJGxaTyRGWq+ETFpDJVfOKw1kUOa13ksNZFfviyim9SeaLyTSpPKt6o+ETFf6niExWTym86rHWRw1oXOax1kR9+mcobFd+k8kbFpDKpTBVPVKaKJypPKqaKSWWqmFSeqHyTylQxqXzTYa2LHNa6yGGti/xwmYo3VKaKqWJSmVSeVDypmFSmiknlScWk8qRiUnlSMan8Sw5rXeSw1kUOa13kh8uoTBWfUJkq3lCZKiaVJypTxaTypOKJylTxRsUbKr/psNZFDmtd5LDWRX74ZRW/qeI3VTxRmSqmiicVk8pU8U0qb6h8omKqmFS+6bDWRQ5rXeSw1kV++DKVv0nlN6lMFU9UnlQ8qZhUnlRMKlPFVPFGxaTypGJS+ZsOa13ksNZFDmtdxP5grUsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIYa2LHNa6yGGtixzWushhrYsc1rrIYa2LHNa6yP8A85XXkpJgcIEAAAAASUVORK5CYII="
                        link: 
                          type: string
                          example: "http://localhost:3000/order/at-restaurant/validate?token=9c48d924-a481-493e-8bbe-6d866e89eb70"
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"           
  
  /admin/order/history:
    get:
      tags:
        - order
      summary: Xem lịch sử đơn hàng
      description: "Xem lại lịch sử đơn hàng của các bàn đã đóng. page là tham số truyền vào, đại diện cho trang, có hay không cũng được, mặc định là 1. Giao diện hiển thị 1 danh sách, gồm 10 ô, mỗi 1 ô chỉ chứa 5 thông tin được trả về bên dưới: mã hóa đơn, bàn, giờ ra, ghi chú, tổng hóa đơn. Hết danh sách sẽ có 1 nút next chuyển qua trang tiếp theo (làm sau cũng được vì hệ thống demo cũng không có quá nhiều hóa đơn), chuyển trang chỉ cần thêm tham số page=2 là được. Chỉ hiện 5 thông tin kia, nếu người dùng muốn xem chi tiết hóa đơn thì bấm vào cái nút in hóa đơn ở mỗi ô, chỉ cần gọi đến api in hóa đơn ở dưới (đơn giản, chỉ cần gắn url gọi đến api đó là được)"
      parameters:
        - in: query
          name: page
          schema:
            type: string
            example: 1
          required: false

      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách đơn hàng thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 65f308e8a63520ebb2e9b27d
                            table: 
                              type: string
                              example: A02
                            checkout: 
                              type: string
                              format: date-time
                              example: 2024-03-14T15:20:51.819Z
                            note: 
                              type: string
                              example: Ghi chú
                            total: 
                              type: number
                              example: 250000
                        example: [
                          {
                            _id: 65f308e8a63520ebb2e9b27d,
                            table: A02,
                            checkout: "2024-03-14T15:20:51.819Z",
                            note: Ghi chú,
                            total: 250000
                          }
                        ]
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /order/verify-slug/{tableSlug}:
    get:
      tags:
        - order
      summary: Xác thực xem slug (có được khi quét QR) có hợp lệ không để hiển thị trang đặt món tương ứng với bàn 
      description: "Quét mã đặt món, trong mã có url gồm slug table để tránh lộn sang bàn khác (như cũ), đồng thời thêm chức năng thông báo để nhân viên xác nhận lại món (cái này có thể làm sau). Lưu ý: slug đó thay cho mã bàn (A01, A02, A03, ...) để tránh việc người đặt món có thể dễ dàng đổi url để order sang bàn khác, mặc dù có bước xác nhận lại của nhân viên nhưng hạn chế được phần nào hay phần đó. Thêm 1 trang front end chứa đường dẫn frontend ví dụ như /order/at-restaurant/validate?token=... để khi khách quét mã đặt món sẽ vào url này. Khi mở trang này ra, đầu tiên front end phải gửi 1 api lên server để xác minh là tableSlug này có hợp lệ không, nếu lỗi thì hiển thị message lỗi, nếu thành công thì chuyển hướng trang đặt món. Mục đích của chuyển hướng trang là xóa đi url cũ (vì có tableslug ở đó, người dùng có thể vào lại url này) và cũng là để hiển thị danh sách đặt món (như cũ) và tên của bàn đó (có trong response trả về). Lưu ý: khi chuyển hướng trang phải dùng: window.location.replace('/order/at-restaurant'), mục đích là để xóa lịch sử url web cũ có dính token. Ngoài ra, lưu tableSlug đó vào cookie, set thời gian hết hạn khoảng 30 phút. Mục đích là giúp người dùng không cần phải quét lại QR nữa. Xử lý ở server: Khi khách hàng vào quét QR và chuyển hướng sang trang đặt món như /order/at-restaurant, tableSlug sẽ được lưu vào bộ nhớ cache với thời gian hết hạn = khoảng 30 phút. Nếu khách vào đặt món lần 2: vào lại link cũ: /order/at-restaurant, server tự động lấy cookie ra để xác thực có hợp lệ không để không phải bắt quét lại QR. Trong trường hợp khách hàng chuyển bàn (hoặc thanh toán), mình sẽ xóa tableSlug lưu trong cache, nên là dù cookie vẫn còn thời gian nhưng cache ở server không còn thì vẫn phải quét lại QR ở bàn mới để đặt món."
      parameters:
        - in: path
          name: tableSlug
          description: Đã mô tả ở trên
          schema:
            type: string
            example: 2a2a5d39-a834-4dd5-bdd9-32c91059315c
          required: true

      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Đã tìm thấy bàn hợp lệ
                        data: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: B01
                            status: 
                              type: number
                              example: 0
                            slug: 
                              type: string
                              example: 2a2a5d39-a834-4dd5-bdd9-32c91059315c
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Mã đặt bàn không hợp lệ  
                      
  /order/area/get-all:
    get:
      tags:
        - order
      summary: Lấy danh sách khu vực 
      description: Lấy danh sách khu vực tại order service thay vì management service
      
      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách khu vực thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: number
                              example: 1
                            name: 
                              type: string
                              example: Tầng 1
                            description: 
                              type: string
                              example: Khu vực tầng trệt
                        example: [
                          {
                            _id: 1,
                            name: Tầng 1,
                            description: Khu vực tầng trệt
                          }
                        ]
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
                      
  /order/processing-ticket/kitchen:
    get:
      tags:
        - order
      summary: Lấy danh sách phiếu chế biến của bếp
      description: Có sử dụng phân trang
      parameters:
        - in: query
          name: page
          description: Page có truyền hoặc không, mặc định là 1
          schema:
            type: string
            example: 1
          required: false
      responses:
        '200':
            description: Thành công. Danh sách sẽ được sắp xếp theo thứ tự theo thời gian mới nhất (giảm dần theo updatedAt), front end cũng thể hiện thời gian ngày tháng năm giờ phút giây luôn. (Gọi `new Date(updatedAt)` là được). Hiển thị 1 nút xem phiếu chế biến là mở ra cái url đó.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy danh sách phiếu chế biến bếp thành công
                        paginationResult: 
                          type: object
                          properties: 
                            currentPage: 
                              type: string
                              example: 1
                            totalItems: 
                              type: number
                              example: 5
                            eachPage: 
                              type: number
                              example: 10
                            totalPage: 
                              type: number
                              example: 1
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              _id: 
                                type: string
                                example: 665819ebbf7e27178edaf20f
                              url_ticket: 
                                type: string
                                example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1717049833/665819e6bf7e27178edaf203-1.pdf
                              print_times: 
                                type: number
                                example: 1
                              createdAt: 
                                type: string
                                format: date-time
                                example: 2024-05-30T06:17:15.528Z
                              updatedAt: 
                                type: string
                                format: date-time
                                example: 2024-05-30T06:17:15.528
                              tableId: 
                                type: string
                                example: A04
                          example: [
                              {
                                _id: 665819ebbf7e27178edaf20f,
                                url_ticket: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1717049833/665819e6bf7e27178edaf203-1.pdf",
                                print_times: 1,
                                createdAt: "2024-05-30T06:17:15.528Z",
                                updatedAt: "2024-05-30T06:17:15.528Z",
                                tableId: "A04"
                              }
                          ]    

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
                      
  /order/processing-ticket/bar:
    get:
      tags:
        - order
      summary: Lấy danh sách phiếu chế biến của pha chế
      description: Có sử dụng phân trang. Tương tự như api phía trên luôn
      parameters:
        - in: query
          name: page
          description: Page có truyền hoặc không, mặc định là 1
          schema:
            type: string
            example: 1
          required: false
      responses:
        '200':
            description: Thành công. Danh sách sẽ được sắp xếp theo thứ tự theo thời gian mới nhất (giảm dần theo updatedAt), front end cũng thể hiện thời gian ngày tháng năm giờ phút giây luôn. (Gọi `new Date(updatedAt)` là được). Hiển thị 1 nút xem phiếu chế biến là mở ra cái url đó.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy danh sách phiếu chế biến bếp thành công
                        paginationResult: 
                          type: object
                          properties: 
                            currentPage: 
                              type: string
                              example: 1
                            totalItems: 
                              type: number
                              example: 5
                            eachPage: 
                              type: number
                              example: 10
                            totalPage: 
                              type: number
                              example: 1
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              _id: 
                                type: string
                                example: 665819ebbf7e27178edaf20f
                              url_ticket: 
                                type: string
                                example: https://res.cloudinary.com/dmjsmmt3h/image/upload/v1717049833/665819e6bf7e27178edaf203-1.pdf
                              print_times: 
                                type: number
                                example: 1
                              createdAt: 
                                type: string
                                format: date-time
                                example: 2024-05-30T06:17:15.528Z
                              updatedAt: 
                                type: string
                                format: date-time
                                example: 2024-05-30T06:17:15.528Z
                              tableId: 
                                type: string
                                example: A04
                          example: [
                              {
                                _id: 665819ebbf7e27178edaf20f,
                                url_ticket: "https://res.cloudinary.com/dmjsmmt3h/image/upload/v1717049833/665819e6bf7e27178edaf203-1.pdf",
                                print_times: 1,
                                createdAt: "2024-05-30T06:17:15.528Z",
                                updatedAt: "2024-05-30T06:17:15.528Z",
                                tableId: "A04"
                              }
                          ]    

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
                      
  /admin/order/update/processing-status:
    patch:
      tags:
        - order
      summary: Cập nhật tình trạng lên món
      description: "Chức năng này sẽ giành cho bộ phận tiếp thực. Bộ phận này chịu trách nhiệm lên món cho khách hàng cũng như cập nhật để xác định bàn nào đã lên món, bàn nào chưa. "
      requestBody: 
        description: "Muốn cập nhật tình trạng, phải xem được danh sách món đã đặt của bàn đó để thao tác. Từ đó, có được các thông tin như mã hóa đơn (orderId), mã lần đặt món (order_detail[i]._id), mã của tên món muốn cập nhật và trạng thái của món đó (status). Status gồm 0: đang chế biến, 1: đã lên món, 2: đã hủy"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                  orderId: 
                    type: string
                    example: 665b387197d50736338330d6
                  orderDetailId: 
                    type: string
                    example: 665b387197d50736338330d7
                  menuId: 
                    type: number
                    example: 4
                  status: 
                    type: number
                    example: 1

        required: true
      responses:
        '200':
          description: Cập nhật thành công
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Cập nhật tình trạng lên món thành công
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi nào đó
                    
  /order/online:
    post:
      tags:
        - order
      summary: Đặt món trực tuyến
      description: "Có thể tận dụng lại trang đặt món, chỉ khác là gọi api đặt món khác nhau. Muốn đặt món yêu cầu phải đăng nhập"
     
      requestBody: 
        description: "Thông tin tương tự như bên đặt trực tiếp. Time receive có hay không cũng được. **Update on 13/7**: thông tin giao hàng bổ sung tỉnh thành, quận huyện, phường xã, địa chỉ số nhà, vào kinh độ, tọa độ từ api của phường xã, mục đích để backend tính toán phí ship."
        content: 
          application/json:
            schema:
                type: object
                properties: 
                      menu: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 4
                            quantity: 
                              type: number
                              example: 3
                            note: 
                              type: string
                              example: Không hành
                        example: [
                            {
                              _id: 4,
                              quantity: 3,
                              note: Không hành
                            }
                        ]
                      note: 
                        type: string
                        example: Giao nhanh giùm nha
                      payment_method: 
                        type: string
                        example: bank
                      delivery: 
                        type: object
                        properties: 
                          name: 
                            type: string
                            example: Lưu Đức Hải
                          phone_number: 
                            type: string
                            example: 0123456789
                          province: 
                            type: string
                            example: Thành phố Hồ Chí Minh
                          district: 
                            type: string
                            example: Quận 1
                          ward: 
                            type: string
                            example: Phường Đa Kao
                          longitude: 
                            type: string
                            example: 106.7032527
                          latitude: 
                            type: string
                            example: 10.7801495
                          address: 
                            type: string
                            example: Nguyễn Siêu
                      time_receive: 
                        type: string
                        example: null
   

        required: true
      responses:
        '200':
            description: "Thành công. Thông tin gồm message với thông báo. **Cập nhật 13/7**: Kết quả trả thêm về orderId và total, frontend sẽ sử dụng orderId, total này để tạo url thanh toán. Luồng hoạt động như sau: người dùng bấm Đặt món, gửi đến API đặt món này, nếu thanh toán với hình thức là cod thì Thông báo đặt món thành công, còn hình thức bank thì đơn hàng sẽ được lưu dưới dạng bản nháp, frontend sẽ chuyển sang API thanh toán phía dưới (cả order và order online đều dùng chung API thanh toán), nếu thanh toán thành công thì đơn hàng mới chính thức Đặt thành công" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Đặt đơn hàng thành công
                      orderId: 
                        type: string
                        example: 669226b9b3e525f406300b96
                      total:
                        type: number
                        example: 329000
                    
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message"   
            
  /order/online/history-list:
    get:
      tags:
        - order
      summary: Lấy danh sách lịch sử đặt món online của user
      description: Lấy theo mã người dùng đang đăng nhập nên yêu cầu đăng nhập.
      responses:
        '200':
            description: Thành công. Sắp xếp theo thời gian giảm dần
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy danh sách lịch sử đặt món thành công
                      data: 
                        type: array
                        items: 
                          type: object
                          properties: 
                            _id: 
                              type: string
                              example: 668ab1e913c23180e5cb8560
                            menu_detail: 
                              type: array
                              items: 
                                type: object
                                properties: 
                                  _id: 
                                    type: number
                                    example: 2
                                  name: 
                                    type: string
                                    example: Chả giò
                                  quantity: 
                                    type: number
                                    example: 3
                                  price: 
                                    type: number
                                    example: 80000
                              example: [
                                {
                                  _id: 2,
                                  name: Chả giò,
                                  quantity: 3,
                                  price: 80000
                                }
                              ]
                            total: 
                              type: number
                              example: 380000
                            time: 
                              type: string
                              format: date-time
                              example: 2024-07-07T02:57:51.923Z
                            status: 
                              type: string
                              example: "Đang chờ giao hàng"
                        example: [
                            {
                              _id: 668ab1e913c23180e5cb8560,
                              menu_detail: [
                                  {
                                    _id: 2,
                                    name: Chả giò,
                                    quantity: 3,
                                    price: 80000,
                                  }
                              ],
                              total: 380000,
                              time: "2024-07-07T02:57:51.923Z",
                              status: "Đang chờ giao hàng"
                            }
                        ]
   

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
                      
  /order/online/history-detail/{id}:
    get:
      tags:
        - order
      summary: Lấy chi tiết đơn hàng trực tuyến
      description: Lấy dựa trên id truyền vào
      parameters:
        - in: path
          name: id
          description: "Mã đơn hàng"
          schema:
            type: string
            example: "668ab1e913c23180e5cb8560"
          required: true
      responses:
        '200':
            description: Thành công.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Lấy lịch sử đặt món thành công
                      data: 
                        type: object
                        properties: 
                            delivery_information: 
                              type: object
                              properties: 
                                name: 
                                  type: string
                                  example: abv
                                phone_number: 
                                  type: string
                                  example: 023
                                address: 
                                  type: string
                                  example: ddd
                            order_person: 
                              type: object
                              properties: 
                                _id: 
                                  type: string
                                  example: 0123456789
                                name: 
                                  type: string
                                  example: Lưu Đức Hải
                            _id: 
                              type: string
                              example: 668ab1e913c23180e5cb8560
                            menu_detail: 
                              type: array
                              items: 
                                type: object
                                properties: 
                                  _id: 
                                    type: number
                                    example: 2
                                  name: 
                                    type: string
                                    example: Chả giò
                                  quantity: 
                                    type: number
                                    example: 3
                                  price: 
                                    type: number
                                    example: 80000
                              example: [
                                {
                                  _id: 2,
                                  name: Chả giò,
                                  quantity: 3,
                                  price: 80000
                                }
                              ]
                            subtotal: 
                              type: number
                              example: 380000
                            discount: 
                              type: number
                              example: 0
                            surcharge: 
                              type: number
                              example: 0
                            shippingfee: 
                              type: number
                              example: 0
                            note: 
                              type: string
                              example: 
                            total: 
                              type: number
                              example: 380000
                            time: 
                              type: string
                              format: date-time
                              example: 2024-07-07T02:57:51.923Z
                            payment_method: 
                              type: string
                              example: cod
                            status: 
                              type: string
                              example: "Đang chờ giao hàng"
                        example: 
                            {
                              delivery_information: 
                              {
                                name: abv,
                                phone_number: 023,
                                address: ddd
                              },
                              order_person: 
                                {
                                  _id: 0123456789,
                                  name: Lưu Đức Hải
                                },
                              _id: 668ab1e913c23180e5cb8560,
                              menu_detail: [
                                  {
                                    _id: 2,
                                    name: Chả giò,
                                    quantity: 3,
                                    price: 80000,
                                  }
                              ],
                              subtotal: 380000,
                              discount: 0,
                              surcharge: 0,
                              shippingfee: 0,
                              note: "Ghi chú",
                              total: 380000,
                              time: "2024-07-07T02:57:51.923Z",
                              payment_method: cod,
                              status: "Đang chờ giao hàng"
                            }
                        
   

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
            
  /order/apply-promotion:
    post:
      tags:
        - order
      summary: Áp dụng khuyến mãi vào hóa đơn
      description: "Từ danh sách khuyến mãi tại api lấy danh sách khuyến mãi (GET: /order/promotion), ta có thể áp dụng khuyến mãi vào 1 hóa đơn (dành cho thu ngân khi bấm vào 1 bàn để áp dụng khuyến mãi). Hệ thống sẽ tự tính toán giá trị khuyến mãi và áp dụng vào hóa đơn, người dùng có thể xem lại thông tin mới sau đó. Lưu ý là khi load danh sách khuyến mãi sẽ load hết khuyến mãi ra nên có thể là bàn đó chưa đủ điều kiện khuyến mãi, sẽ có trường hợp trả về lỗi là Không đủ điều kiện khuyến mãi, nhớ hiển thị message lỗi nếu có."
     
      requestBody: 
        description: Thông tin gồm id của bàn và id của mã khuyến mãi
        content: 
          application/json:
            schema:
                type: object
                properties: 
                      tableId: 
                        type: string
                        example: A01
                      promotionId: 
                        type: number
                        example: 1

   

        required: true
      responses:
        '200':
            description: Thành công. Thông tin gồm message với thông báo 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Áp dụng khuyến mãi thành công

        '400':
            description: "Lỗi cũng phải bắt đầu từ đâu đó"
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Hóa đơn của bạn còn thiếu 671.000 để áp dụng chương trình khuyến mãi này
                      
  /order/online/provinces:
    get:
      tags:
        - order
      summary: Lấy danh sách tỉnh thành
      description: Danh sách tỉnh thành để chọn địa chỉ giao hàng, mục đích sử dụng đến API này là để tính phí ship hàng cũng như tiện lợi cho đơn vị giao hàng. Tuy nhiên, cái này là tạm thôi. Nếu được, tích hợp API của Google Map, cho phép người dùng lấy vị trí hiện tại hoặc chọn vị trí trên bản đồ, vì như thế sẽ chính xác đến vị trí cụ thể thay vì chỉ chính xác đến phường xã. Nhưng nếu chưa tìm hiểu hoặc bị lỗi thì xài 3 cái API lấy tỉnh thành, phường xã, quận huyện này cũng được (chủ yếu 3 cái này dành cho ecommerce như Shopee ship hàng cả nước, còn mình ship đồ ăn nội thành thì ghim vị trí sẽ oke hơn). Nếu sử dụng 3 API này thì địa chỉ ô đặt món sẽ có tỉnh thành, quận huyện, phường xã, và tên đường số nhà
      responses:
        '200':
            description: Thành công. Chủ yếu lấy id để gọi đến API tiếp theo và lấy tên để hiển thị
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy dữ liệu tỉnh thành thành công
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              id: 
                                type: string
                                example: 89
                              name: 
                                type: string
                                example: An Giang
                              latitude: 
                                type: string
                                example: 10.5392057
                              longitude: 
                                type: string
                                example: 105.2312822
                          example: [
                              {
                                id: 89,
                                name: An Giang,
                                latitude: 10.5392057,
                                longitude: 105.2312822
                              }
                          ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    message: 
                      type: string
                      example: Đã xảy ra lỗi
                      
  /order/online/districts/{id}:
    get:
      tags:
        - order
      summary: Lấy danh sách quận huyện theo tỉnh thành
      description: Tương tự
      parameters:
        - in: path
          name: id
          description: "ID truyền vào là ID của tỉnh thành lấy từ API trước"
          schema:
            type: string
            example: "79"
          required: true
      responses:
        '200':
            description: Thành công.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Lấy dữ liệu quận huyện thành công
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              id: 
                                type: string
                                example: 760
                              name: 
                                type: string
                                example: Quận 1
                              latitude: 
                                type: string
                                example: 10.7773145
                              longitude: 
                                type: string
                                example: 106.6999907
                          example: [
                              {
                                id: 760,
                                name: Quận 1,
                                latitude: 10.7773145,
                                longitude: 106.6999907
                              }
                          ]
                          
  /order/online/wards/{id}:
    get:
      tags:
        - order
      summary: Lấy danh sách phường xã theo quận huyện
      description: Tương tự. Lưu ý đây là cấp API được sử dụng để tính phí ship, nên là khi người dùng chọn phường xã nào thì sẽ lấy long, lat từ dữ liệu trả về để tính phí ship. Sau khi người dùng chọn phường xã xong, gọi đến API tính phí ship bên dưới để người dùng biết được phí ship.
      parameters:
        - in: path
          name: id
          description: "ID truyền vào là ID của quận huyện lấy từ API trước"
          schema:
            type: string
            example: "778"
          required: true
      responses:
        '200':
            description: Thành công.
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                          status: 
                            type: string
                            example: success
                          message: 
                            type: string
                            example: Lấy dữ liệu phường xã thành công
                          data: 
                            type: array
                            items: 
                              type: object
                              properties: 
                                id: 
                                  type: string
                                  example: 27490
                                name: 
                                  type: string
                                  example: Phường Tân Phong
                                latitude: 
                                  type: string
                                  example: 10.7303569
                                longitude: 
                                  type: string
                                  example: 106.7055701
                            example: [
                                {
                                  id: 27490,
                                  name: Phường Tân Phong,
                                  latitude: 10.7303569,
                                  longitude: 106.7055701
                                }
                            ]
                            
  /order/online/shipping-fee:
    post:
      tags:
        - order
      summary: Tính phí ship dựa trên tọa độ giao hàng
      description: "Sau khi người dùng đã chọn 3 cấp thông tin là tỉnh thành, quận huyện, phường xã, sử dụng tọa độ của phường xã hoặc sử dụng API của google map cũng cung cấp cho mình kinh độ và vĩ độ (long, lat). Sử dụng 2 thông tin này để tính phí ship, đồng thời cộng thêm phí ship này vào tổng tiền. API đặt món cũng sẽ được cập nhật thêm thông tin kinh độ và vĩ độ. Tại backend, thông tin giao hàng sẽ được tính dựa trên khoảng cách từ phường xã giao hàng đến vị trí nhà hàng (hiện tại đang được ghim là tọa độ trường ĐH Tôn Đức Thắng), dựa trên công thức `haversine`. Phí giao hàng tại backend được tính như sau: phí cơ bản từ 15,000 VND cho khoảng cách ngắn (3 km đầu tiên), sau đó tính thêm khoảng 5,000 VND cho mỗi km tiếp theo"
      requestBody: 
        description: Kinh độ và vĩ độ
        content: 
          application/json:
            schema:
              type: object
              properties: 
                  longitude: 
                    type: string
                    example: 106.7032527
                  latitude: 
                    type: string
                    example: 10.7801495
        required: true

      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties:
                      status: 
                        type: string
                        example: success
                      message: 
                        type: string
                        example: Tính dữ liệu phí ship thành công
                      data: 
                        type: object
                        properties: 
                          distance: 
                            type: string
                            example: 5.29 km
                          shippingFee: 
                            type: number
                            example: 26500



        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 

            
  /payment/create-payment-url:
    post:
      tags:
        - payment
      summary: Tạo url thanh toán đến trang của VNPay
      description: "Tạo url thanh toán đến trang của VNPay. Backend sẽ trả về 1 VNPay URL, frontend sẽ chuyển hướng đến trang web đó -> chọn phương thức thanh toán là Thẻ nội địa và ngân hàng. Thông tin thẻ demo mẫu tại: https://sandbox.vnpayment.vn/apis/vnpay-demo/"
      requestBody: 
        description: Amount là số tiền cần thanh toán. orderId là mã hóa đơn
        content: 
          application/json:
            schema:
              type: object
              properties: 
                amount: 
                  type: number
                  example: 50000
                orderId:
                  type: string
                  example: "6658082f66e00619d3d484ff"
        required: true

      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    status: 
                      type: string
                      example: success
                    data: 
                      type: object
                      properties: 
                        vnpUrl: 
                          type: string
                          example: "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=5000000&vnp_Command=pay&vnp_CreateDate=20240524195131&vnp_CurrCode=VND&vnp_IpAddr=%3A%3A1&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+cho+ma+GD%3A24195131&vnp_OrderType=other&vnp_ReturnUrl=http%3A%2F%2Flocalhost%3A5005%2Fvnpay_return&vnp_TmnCode=CVPSQQMS&vnp_TxnRef=24195131&vnp_Version=2.1.0&vnp_SecureHash=b71c6edca72cf37156a44063e82c050859d86c13980aaef841c871e8d826cffffd4bf5caa6e5d26b66c65ed18fd1af17b4da6fa3d889ee7afb9d4698e004927b"


        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /payment/vnpay_return:
    get:
      tags:
        - payment
      summary: Callback sau khi khách hàng thực hiện thanh toán
      description: "Frontend sẽ tạo 1 trang để hứng kết quả trả về từ VNPay. Sau đó, vào payment-service, sửa lại vnp_ReturnUrl là url trang này của frontend. Tức là, sau khi khách hàng thanh toán ở api phía trên, VNPay sẽ trả về kết quả thanh toán của khách hàng vào returnUrl đó (thông tin kết quả sẽ được truyền dưới dạng query). Frontend sẽ chuyển tiếp tất cả các query đó lên server với api này: /payment/vnpay_return. Server sẽ trả về kết quả thanh toán và frontend sẽ hiển thị kết quả lên giao diện. Nếu thất bại sẽ báo cả lý do (thẻ hết tiền, thẻ bị khóa, ...). Vì backend còn phải lưu data giao dịch vào trong database nên mới cần frontend gửi lên backend rồi mới hiển thị kết quả."
      parameters:
        - in: query
          name: .
          description: "Lấy toàn bộ query được trả về từ VNPay để thêm vào query gửi lên server. Ví dụ đây: "
          schema:
            type: string
            example: "?vnp_Amount=1000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14226112&vnp_CardType=ATM&vnp_OrderInfo=Thanh+toan+don+hang+thoi+gian%3A+2023-12-07+17%3A00%3A44&vnp_PayDate=20231207170112&vnp_ResponseCode=00&vnp_TmnCode=CTTVNP01&vnp_TransactionNo=14226112&vnp_TransactionStatus=00&vnp_TxnRef=166117&vnp_SecureHash=b6dababca5e07a2d8e32fdd3cf05c29cb426c721ae18e9589f7ad0e2db4b657c6e0e5cc8e271cf745162bcb100fdf2f64520554a6f5275bc4c5b5b3e57dc4b4b"
          required: true

      responses:
        '200':
            description: Thành công. Cái code là cái để xác định mã lỗi, không cần quan tâm lắm vì server sẽ convert từ mã lỗi ra message cụ thể
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                        status: 
                          type: string
                          example: success
                        code: 
                          type: string
                          example: "00"
                        message: 
                          type: string
                          example: Giao dịch thành công
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                    status: 
                      type: string
                      example: error
                    code: 
                      type: string
                      example: 24
                    message: 
                      type: string
                      example: "Giao dịch không thành công do: Khách hàng hủy giao dịch"
  
  /notification/num-notification:
    get:
      tags:
        - notification
      summary: Lấy số lượng thông báo mới
      description: "Lấy số lượng thông báo mới để hiển thị cái số màu đỏ lên cái chuông thông báo. Lưu ý: thông báo sẽ được lấy theo userId trong JWT Token, 1 là chèn JWT token vào authorization header, 2 là bỏ vào trong cookie"
      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                          status: 
                            type: string
                            example: success
                          messsage: 
                            type: string
                            example: Lấy số lượng thông báo mới thành công
                          data: 
                            type: number
                            example: 2
        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /notification/get-notifications:
    get:
      tags:
        - notification
      summary: Lấy danh sách thông báo
      description: "Danh sách được sắp xếp sao cho thông báo chưa đọc lên trước, sau đó thông báo mới nhất đến cũ hơn, hiển thị trạng thái đọc na ná facebook. Đồng thời, khi lấy danh sách thông báo mới thì server tự động set trạng thái toàn bộ thông báo là đã đọc luôn. Giới hạn khi load ra danh sách là 20 thông báo."
      responses:
        '200':
            description: Thành công. 
            content:
              application/json:
                schema:
                  type: object
                  properties: 
                            status: 
                              type: string
                              example: success
                            messsage: 
                              type: string
                              example: Lấy danh sách thông báo thành công
                            data: 
                              type: array
                              items: 
                                type: object
                                properties: 
                                  _id: 
                                    type: string
                                    example: 666da15889eb362bb0ef6e63
                                  userId: 
                                    type: string
                                    example: 093213213212
                                  title: 
                                    type: string
                                    example: Chào mừng bạn đến với nhà hàng của chúng tôi!
                                  message: 
                                    type: string
                                    example: Cảm ơn bạn đã đăng ký! Hãy thưởng thức giảm giá 10% cho đơn hàng đầu tiên của bạn.
                                  isRead: 
                                    type: boolean
                                  link: 
                                    type: string
                                    example: /khuyen-mai/giam-gia-don-dau-tien
                                  createdAt: 
                                    type: string
                                    format: date-time
                                    example: 2024-06-15T10:00:00Z
                                  updatedAt: 
                                    type: string
                                    format: date-time
                                    example: 2024-06-15T10:00:00Z
                              example: [
                                  {
                                    _id: 666da15889eb362bb0ef6e63,
                                    userId: 093213213212,
                                    title: "Chào mừng bạn đến với nhà hàng của chúng tôi!",
                                    message: "Cảm ơn bạn đã đăng ký! Hãy thưởng thức giảm giá 10% cho đơn hàng đầu tiên của bạn.",
                                    isRead: false,
                                    link: "/khuyen-mai/giam-gia-don-dau-tien",
                                    createdAt: "2024-06-15T10:00:00Z",
                                    updatedAt: "2024-06-15T10:00:00Z"
                                  }
                              ]

        '400':
            description: "Lỗi xử lý tương tự các trường hợp API phía trên. Lấy status và message" 
            
  /user/verify-email:
    post:
      tags:
        - email
      summary: Xác thực email người dùng
      description: Xác thực chính chủ email của người dùng. Mục đích của việc xác thực là để email được sử dụng cho việc quên mật khẩu hoặc nhận các thông báo về đơn hàng, khuyến mãi. Mặc dù số điện thoại là khóa chính nhưng lại dùng email vì các dịch vụ gửi sms bây giờ toàn tính phí, dùng email cho nó tiết kiệm. Để sử dụng email này tất nhiên người dùng cần đăng nhập (role nào cũng được). Sẽ có middleware kiểm tra user đã đăng nhập chưa. Ở đây backend sẽ generate ra 1 OTP 6 số, và chuyển tiếp sang service send mail, đồng thời backend sẽ lưu cái OTP vào Redis và set thời gian hết hạn cho nó là 5 phút. Vì thế, bật docker lên và chạy redis với lệnh trong folder `docker-redis` không là sẽ báo lỗi redis đó.
      requestBody: 
        description: "Gửi lên email mà người dùng nhập, hoặc nếu không nhập thì hệ thống tự động lấy email (chưa xác thực) mà người dùng đã thêm vào profile trước đó"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                email: 
                  type: string
                  example: luuduchai.nt@gmail.com
        required: true
      responses:
        '200':
          description: Hệ thống sẽ trả về thông báo send otp đến email kèm theo userId, cái userId này để frontend lưu lại để sử dụng cho api phía sau, là gửi OTP lên xác thực
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Gửi OTP thành công đến email luuduchai.nt@gmail.com otp có hiệu lực trong 5 phút
                    data: 
                      type: object
                      properties: 
                        userId: 
                          type: string
                          example: 093213213212
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Lỗi cũng phải bắt đầu từ đâu đó
     
  /user/verify-otp-email:
    post:
      tags:
        - email
      summary: Xác thực OTP từ api bên trên
      description: Frontend sau khi lấy thành công response từ phía trên thì hiển thị trang cho người dùng nhập OTP (6 số), người dùng check email để lấy OTP, sau đó frontend gửi đến api này kèm userId (từ api phía trên) và otp mà người dùng nhập
      requestBody: 
        description: "Gửi lên email mà người dùng nhập, hoặc nếu không nhập thì hệ thống tự động lấy email (chưa xác thực) mà người dùng đã thêm vào profile trước đó"
        content: 
          application/json:
            schema:
              type: object
              properties: 
                userId: 
                  type: string
                  example: 093213213212
                otp:
                  type: string
                  example: 150802
        required: true
      responses:
        '200':
          description: Hệ thống sẽ trả về thông báo send otp đến email kèm theo userId, cái userId này để frontend lưu lại để sử dụng cho api phía sau, là gửi OTP lên xác thực
          content:
            application/json:
              schema:
                type: object
                properties: 
                    status: 
                      type: string
                      example: success
                    message: 
                      type: string
                      example: Xác thực email thành công
        '400':
          description: "Lỗi"
          content:
            application/json:
              schema:
                type: object
                properties: 
                  status:
                    type: string
                    example: error
                  message:
                    type: string
                    example: Mã xác thực không đúng
                    
  /statistics/get-revenue:  
    get:
        tags:
          - statistics
        summary: Thống kê doanh thu
        description: "Giới thiệu phân hệ thống kê: Tạo một menu chính là báo cáo kinh doanh. Trong đó sẽ có danh sách các loại thống kê như bên dưới. Trang chủ của báo cáo kinh doanh này có thể hiển thị mặc định là thống kê doanh thu theo ngày hôm nay, thống kê lượt khách theo ngày, thống kê doanh thu món theo ngày... (kiểu như `Tổng doanh thu hôm nay: xxx`). Còn về api thống kê doanh thu này, chọn ngày bắt đầu và ngày kết thúc muốn thống kê, nếu không chọn thì mặc định là hôm nay"
        parameters:
          - in: query
            name: from
            schema:
              type: string
              example: "2024-03-07T00:00:00"
          - in: query
            name: to
            schema:
              type: string
              example: "2024-10-07T00:00:00"
        responses:
          '200':
              description: Thành công. Trong đó, _id là số ngày, totalAmount là số doanh thu của ngày đó, ngày nào có mới hiển thị ra danh sách. Hiển thị dạng đồ thị, trục hoành là ngày, trục tung là tiền
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                            status: 
                              type: string
                              example: success
                            message: 
                              type: string
                              example: Thống kê doanh thu thành công
                            data: 
                              type: array
                              items: 
                                type: object
                                properties: 
                                  _id: 
                                    type: string
                                    format: date
                                    example: 2024-06-22
                                  totalAmount: 
                                    type: number
                                    example: 658000
                              example: [
                                {
                                  _id: 2024-06-22,
                                  totalAmount: 658000
                                }
                              ]

  
          '400':
              description: "Lỗi"
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                      status:
                        type: string
                        example: error
                      message:
                        type: string
                        example: Lỗi nào đó  
                    
  /statistics/num-customer:  
    get:
        tags:
          - statistics
        summary: Thống kê số lượt khách
        description: "Có thể truyền số ngày muốn lấy (from, to) hoặc server tự động lấy ra số lượt khách của ngày hiện tại. Có thể query theo 2 cái from, to phía dưới để query được data, query sai khoảng ngày là không ra đâu"
        parameters:
          - in: query
            name: from
            schema:
              type: string
              example: "2024-03-07T00:00:00"
          - in: query
            name: to
            schema:
              type: string
              example: "2024-10-07T00:00:00"
        responses:
          '200':
              description: Thành công. Trong đó, _id là số ngày, count là số lượt khách của ngày đó, ngày nào có mới hiển thị ra danh sách. Hiển thị dạng đồ thị, trục hoành là ngày, trục tung là số lượt
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                          status: 
                            type: string
                            example: success
                          message: 
                            type: string
                            example: Lấy số lượt khách thành công
                          data: 
                            type: array
                            items: 
                              type: object
                              properties: 
                                _id: 
                                  type: string
                                  format: date
                                  example: 2024-05-31
                                count: 
                                  type: number
                                  example: 1
                            example: [
                                {
                                  _id: 2024-05-31,
                                  count: 2
                                }
                            ]
  
          '400':
              description: "Lỗi"
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                      status:
                        type: string
                        example: error
                      message:
                        type: string
                        example: Lỗi nào đó  
                        
  /statistics/area:  
    get:
        tags:
          - statistics
        summary: Thống kê doanh thu theo khu vực
        description: "Truyền thông tin ngày muốn thống kê (chỉ nhận 1 ngày thôi, không nhận nhiều ngày). Nếu không truyền thì mặc định là hôm nay."
        parameters:
          - in: query
            name: date
            schema:
              type: string
              example: "2024-06-22T00:00:00"
        responses:
          '200':
              description: Thành công. Thông tin trả về là tên khu vực và doanh thu của khu vực đó. Hiển thị biểu đồ hoặc dạng thông thường giống bảng cũng được.
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                              status: 
                                type: string
                                example: success
                              message: 
                                type: string
                                example: Thống kê doanh thu theo khu vực thành công
                              data: 
                                type: array
                                items: 
                                  type: object
                                  properties: 
                                    area: 
                                      type: string
                                      example: Tầng 1
                                    value: 
                                      type: number
                                      example: 658000
                                example: [
                                  {
                                    area: Tầng 1,
                                    value: 658000
                                  }
                                ]


  
          '400':
              description: "Lỗi"
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                      status:
                        type: string
                        example: error
                      message:
                        type: string
                        example:  Lỗi cũng phải bắt đầu từ đâu đó 
                        
  /statistics/menu:  
    get:
        tags:
          - statistics
        summary: Thống kê doanh thu theo món ăn
        description: "Query param là khoảng thời gian muốn thống kê, nếu không có thì lấy ngày hôm nay, nói chung tương tự mấy cái trên"
        parameters:
          - in: query
            name: from
            schema:
              type: string
              example: "2024-03-07T00:00:00"
          - in: query
            name: to
            schema:
              type: string
              example: "2024-10-07T00:00:00"
        responses:
          '200':
              description: Thành công. Thông tin trả về là tên món, số lượng, và tổng doanh thu của món đó. Nó đã được sắp xếp sẵn theo thứ tự rồi, món đầu tiên là cái có doanh thu cao nhất. Response ít dữ liệu thì không sao, nhiều dữ liệu có thể sẽ phải thêm phân trang, có time thì làm sau vậy
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                        status: 
                          type: string
                          example: success
                        message: 
                          type: string
                          example: Thống kê doanh thu theo món ăn thành công
                        data: 
                          type: array
                          items: 
                            type: object
                            properties: 
                              name: 
                                type: string
                                example: Bông cải xào tỏi
                              quantity: 
                                type: number
                                example: 15
                              totalPrice: 
                                type: number
                                example: 1050000
                          example: [
                            {
                              name: Bông cải xào tỏi,
                              quantity: 15,
                              totalPrice: 1050000
                            }
                          ]
          '400':
              description: "Lỗi"
              content:
                application/json:
                  schema:
                    type: object
                    properties: 
                      status:
                        type: string
                        example: error
                      message:
                        type: string
                        example: Lỗi cũng phải bắt đầu từ đâu đó